{"version":3,"sources":["file:///Users/edz/work/creatorproject/3.3.1/test/assets/test/src/common/base/ui/ScrollList.ts"],"names":["_decorator","CCBoolean","CCFloat","CCInteger","Component","Enum","EventHandler","instantiate","isValid","Layers","Layout","Node","NodePool","Prefab","ScrollView","Size","tween","UITransform","Vec3","Widget","DEV","EDITOR","ScrollListItem","ccclass","property","disallowMultiple","menu","executionOrder","requireComponent","TemplateType","LayerType","SlideType","SelectedType","ScrollList","type","tooltip","visible","templateType","NODE","PREFAB","range","slide","_slideMode","PAGE","val","slideMode","NORMAL","cyclic","virtual","lackCenter","lackSlide","selectedMode","NONE","SINGLE","repeatEventSingle","serializable","onLoad","_init","onDestroy","t","_itemTmp","destroy","tmpNode","_mainPool","clear","_poolList","forEach","value","onEnable","_registerEvent","_aniDelRuning","_aniDelItem","_aniDelBeforePos","position","_aniDelBeforeScale","scale","_aniDelCB","onDisable","_unregisterEvent","node","on","EventType","TOUCH_START","_onTouchStart","_onTouchUp","TOUCH_CANCEL","_onTouchCancelled","_onScrollBegan","_onScrollEnded","_onScrolling","SIZE_CHANGED","_onSizeChanged","off","_inited","_thisNodeUt","getComponent","_scrollView","content","_contentUt","console","error","name","_layout","_align","_resizeMode","resizeMode","_startAxis","startAxis","_topGap","paddingTop","_rightGap","paddingRight","_bottomGap","paddingBottom","_leftGap","paddingLeft","_columnGap","spacingX","_lineGap","spacingY","_colLineNum","_verticalDir","verticalDirection","_horizontalDir","horizontalDirection","setTemplateItem","tmpPrefab","ADHERING","inertia","_onMouseWheel","_lastDisplayData","displayData","_forceUpdate","_updateCounter","_updateDone","curPageNum","_processAutoScrolling","bind","_startBounceBackIfNeeded","Type","HORIZONTAL","HorizontalDirection","LEFT_TO_RIGHT","_alignCalcType","RIGHT_TO_LEFT","VERTICAL","VerticalDirection","TOP_TO_BOTTOM","BOTTOM_TO_TOP","GRID","AxisDirection","removeAllChildren","listItem","contentLayerType","SLICE","i","layerNodeList","length","childContent","layer","UI_2D","contentTF","childtf","addComponent","anchorX","anchorY","parent","push","_contentList","dt","OUT_OF_BOUNDARY_BREAKING_FACTOR","EPSILON","ZERO","quintEaseOut","time","sv","isAutoScrollBrake","brakingFactor","percentage","Math","min","clonedAutoScrollTargetDelta","clone","multiplyScalar","clonedAutoScrollStartPosition","add","reachedEnd","abs","fireEvent","SCROLL_ENG_WITH_THRESHOLD","brakeOffsetPosition","subtract","set","moveDelta","outOfBoundary","equals","deltaMove","SCROLLING","SCROLL_ENDED","item","_itemTmpUt","ResizeMode","CHILDREN","_itemSize","cellSize","itemUt","width","height","com","remove","enabled","_needUpdateWidget","MULT","multSelected","_sizeType","trimW","floor","trimH","checkInited","printLog","_resizeContent","result","_customSize","fixed","_getFixedSize","_numItems","count","lineNum","ceil","colNum","layout","_allItemSize","_allItemSizeNoEdge","totalSize","_cyclicPos1","_cyclicNum","spacing","_cyclicPos2","_cyclicAllItemSize","_cycilcAllItemSizeNoEdge","_lack","slideOffset","targetWH","ev","undefined","frameCount","_updateRate","scrollPos","getPosition","y","x","addVal","contentPos","z","setPosition","isAutoScrolling","_calcViewPos","vTop","vRight","vBottom","vLeft","viewTop","viewBottom","viewRight","viewLeft","_virtual","itemPos","curId","endId","breakFor","_calcItemPos","right","left","bottom","top","ww","hh","_delRedundantItem","firstListId","id","displayItemNum","len","haveDataChange","frameByFrameRenderNum","sort","a","b","_doneAfterUpdate","c","_createOrUpdateItem","_showAnimation","_calcNearestItem","elasticLeft","elasticRight","elasticTop","elasticBottom","itemX","itemY","cs","offset","colLine","_calcExistItemPos","getItemByListId","ut","pos","data","getItemPos","listId","parseInt","_beganPos","_curScrollIsTouch","scrollToListId","to","start","adhering","adhere","_pageAdhere","captureListeners","isMe","eventPhase","Event","AT_TARGET","target","itemNode","_listId","_scrollItem","_scrollPos","_adheringBarrier","simulate","_onItemAdaptive","updateAll","_scrollToListId","unschedule","_scrollToSo","scrollTo","max","_scrollToEndTime","Date","getTime","curPos","dis","pageDistance","canSkip","timeInSecond","prePage","nextPage","nearestListId","update","n","_createOrUpdateItem2","animate","elementList","canGet","size","get","pool","index","element","component","posV3","setContentSize","vec3Point","_resetItemSize","addChild","widget","updateAlignment","setSiblingIndex","children","list","renderEvent","emitEvents","_actualNumItems","_updateListItem","indexOf","animationEvent","selected","selectedId","_updateItemPos","listIdOrItem","isNaN","setMultSelected","args","bool","Array","isArray","sub","splice","getMultSelected","hasMultSelected","updateItem","numItems","_getOutsideItem","find","d","arr","isCached","put","m","_delSingleItem","removeFromParent","aniDelItem","callFunc","aniType","warn","curLastId","resetSelectedId","showAni","newId","newData","_selectedId","newCustomSize","idNumber","sec","twe","haveCB","posData","call","overStress","updateLayout","targetX","targetY","viewPos","comparePos","runScroll","scrollToOffset","scheduleOnce","center","skipPage","pageNum","pageChangeEvent","calcCustomSize","temp","Object","keys","_lastSelectedId","canTouchCancel","lastItem","selectedEvent"],"mappings":"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","sourcesContent":["/******************************************\n * @author kL <klk0@qq.com>\n * @date 2020/12/9\n * @doc 列表组件.\n * @end\n ******************************************/\n\"use strict\";\nconst { ccclass, property, disallowMultiple, menu, executionOrder, requireComponent } = _decorator;\nimport { _decorator, CCBoolean, CCFloat, CCInteger, Component, Enum, EventHandler, instantiate, isValid, Layers, Layout, Node, NodePool, Prefab, ScrollView, Size, tween, Tween, UITransform, Vec2, Vec3, Widget } from \"cc\";\nimport { DEV, EDITOR } from \"cc/env\";\nimport ScrollListItem from \"./ScrollListItem\";\n\nenum TemplateType {\n\tNODE = 1,\n\tPREFAB = 2,\n}\n\nenum LayerType {\n\t/** 不分层 */\n\tNONE,\n\t/** 分层 */\n\tSLICE,\n}\n\nenum SlideType {\n\tNORMAL = 1, //普通\n\tADHERING = 2, //粘附模式，将强制关闭滚动惯性\n\tPAGE = 3, //页面模式，将强制关闭滚动惯性\n}\n\nenum SelectedType {\n\tNONE = 0,\n\tSINGLE = 1, //单选\n\tMULT = 2, //多选\n}\n\n@ccclass\n@disallowMultiple()\n@menu(\"组件库/ScrollList\")\n@requireComponent(ScrollView)\n//脚本生命周期回调的执行优先级。小于 0 的脚本将优先执行，大于 0 的脚本将最后执行。该优先级只对 onLoad, onEnable, start, update 和 lateUpdate 有效，对 onDisable 和 onDestroy 无效。\n@executionOrder(-5000)\nexport default class ScrollList extends Component {\n\t@property({ type: Enum(LayerType), tooltip: \"是否分层渲染\" })\n\tpublic contentLayerType: LayerType = LayerType.NONE;\n\t//模板Item（Node）\n\t@property({\n\t\ttype: Node,\n\t\ttooltip: DEV && \"模板Item\",\n\t\tvisible() {\n\t\t\treturn this.templateType == TemplateType.NODE;\n\t\t},\n\t})\n\ttmpNode: Node = null!;\n\t//模板Item（Prefab）\n\t@property({\n\t\ttype: Prefab,\n\t\ttooltip: DEV && \"模板Item\",\n\t\tvisible() {\n\t\t\treturn this.templateType == TemplateType.PREFAB;\n\t\t},\n\t})\n\ttmpPrefab: Prefab = null!;\n\t//翻页作用距离\n\t@property({\n\t\ttype: CCFloat,\n\t\trange: [0, 1, 0.1],\n\t\ttooltip: DEV && \"翻页作用距离\",\n\t\tslide: true,\n\t\tvisible() {\n\t\t\treturn this._slideMode == SlideType.PAGE;\n\t\t},\n\t})\n\tpublic pageDistance: number = 0.3;\n\t//是否为循环列表\n\t@property({\n\t\ttooltip: DEV && \"是否为循环列表\",\n\t\tvisible() {\n\t\t\tlet val: boolean = /*this.virtual &&*/ this.slideMode == SlideType.NORMAL;\n\t\t\tif (!val) this.cyclic = false;\n\t\t\treturn val;\n\t\t},\n\t})\n\tpublic cyclic: boolean = false;\n\t//缺省居中\n\t@property({\n\t\ttooltip: DEV && \"Item数量不足以填满Content时，是否居中显示Item（不支持Grid布局）\",\n\t\tvisible() {\n\t\t\treturn this.virtual;\n\t\t},\n\t})\n\tpublic lackCenter: boolean = false;\n\t//缺省可滑动\n\t@property({\n\t\ttooltip: DEV && \"Item数量不足以填满Content时，是否可滑动\",\n\t\tvisible() {\n\t\t\tlet val: boolean = this.virtual && !this.lackCenter;\n\t\t\tif (!val) this.lackSlide = false;\n\t\t\treturn val;\n\t\t},\n\t})\n\tpublic lackSlide: boolean = false;\n\t//分帧渲染（每帧渲染的Item数量（<=0时关闭分帧渲染））\n\t@property({\n\t\ttype: CCInteger,\n\t\trange: [0, 12, 1],\n\t\ttooltip: DEV && \"逐帧渲染时，每帧渲染的Item数量（<=0时关闭分帧渲染）\",\n\t\tslide: true,\n\t})\n\tpublic frameByFrameRenderNum: number = 0;\n\t//渲染事件（渲染器）\n\t@property({\n\t\ttype: EventHandler,\n\t\ttooltip: DEV && \"渲染事件（渲染器）\",\n\t})\n\tpublic renderEvent: EventHandler = new EventHandler();\n\t//选择模式\n\t@property({\n\t\ttype: Enum(SelectedType),\n\t\ttooltip: DEV && \"选择模式\",\n\t})\n\tpublic selectedMode: SelectedType = SelectedType.NONE;\n\t//触发选择事件\n\t@property({\n\t\ttype: EventHandler,\n\t\ttooltip: DEV && \"触发选择事件\",\n\t\tvisible() {\n\t\t\treturn this.selectedMode > SelectedType.NONE;\n\t\t},\n\t})\n\tpublic selectedEvent: EventHandler = new EventHandler();\n\t@property({\n\t\ttooltip: DEV && \"是否重复响应单选事件\",\n\t\tvisible() {\n\t\t\treturn this.selectedMode == SelectedType.SINGLE;\n\t\t},\n\t})\n\tpublic repeatEventSingle: boolean = false;\n\tpublic content: Node;\n\tpublic displayItemNum: number;\n\tpublic _actualNumItems: number;\n\tpublic displayData: any[];\n\tpublic _customSize: any;\n\tpublic curPageNum: number = 0;\n\t@property({\n\t\ttype: false,\n\t\ttooltip: \"TOGGLE 模式下  选中后再次点击取消选中（需要 repeatEventSingle 为 'true'）\",\n\t\tvisible: function (this: ScrollList) {\n\t\t\treturn this.selectedMode === SelectedType.SINGLE && this.repeatEventSingle === true;\n\t\t},\n\t})\n\tprivate canTouchCancel: boolean = false;\n\n\t//模板类型\n\t@property({ type: Enum(TemplateType), tooltip: DEV && \"模板类型\" })\n\tprivate templateType: TemplateType = TemplateType.NODE;\n\t//页面改变事件\n\t@property({\n\t\ttype: EventHandler,\n\t\ttooltip: DEV && \"页面改变事件\",\n\t\tvisible() {\n\t\t\treturn this._slideMode == SlideType.PAGE;\n\t\t},\n\t})\n\tprivate pageChangeEvent: EventHandler = new EventHandler();\n\n\t//初始化动画事件\n\t@property({\n\t\ttype: EventHandler,\n\t\ttooltip: DEV && \"初始化动画事件\",\n\t})\n\tpublic animationEvent: EventHandler = new EventHandler();\n\tprivate _lastSelectedId: number;\n\tprivate multSelected: number[];\n\tprivate _forceUpdate: boolean = false;\n\tprivate _align: number;\n\tprivate _horizontalDir: number;\n\tprivate _verticalDir: number;\n\tprivate _startAxis: number;\n\tprivate _alignCalcType: number;\n\tprivate _contentUt: UITransform;\n\tprivate firstListId: number;\n\tprivate _updateDone: boolean = true;\n\tprivate _updateCounter: number;\n\tprivate _cyclicNum: number;\n\tprivate _cyclicPos1: number;\n\tprivate _cyclicPos2: number;\n\tprivate _inited: boolean = false;\n\tprivate _layout: Layout;\n\tprivate _resizeMode: number;\n\tprivate _topGap: number;\n\tprivate _rightGap: number;\n\tprivate _bottomGap: number;\n\tprivate _leftGap: number;\n\tprivate _columnGap: number;\n\tprivate _lineGap: number;\n\tprivate _colLineNum: number;\n\tprivate _lastDisplayData: number[];\n\tprivate _mainPool: NodePool = null!;\n\tprivate _poolList: NodePool[] = [];\n\tprivate _itemTmp: any;\n\tprivate _itemTmpUt: UITransform;\n\tprivate _needUpdateWidget: boolean = false;\n\tprivate _itemSize: Size;\n\tprivate _sizeType: boolean;\n\tprivate frameCount: number;\n\tprivate _aniDelRuning: boolean = false;\n\tprivate _aniDelCB: Function;\n\tprivate _aniDelItem: any;\n\tprivate _aniDelBeforePos: Vec2;\n\tprivate _aniDelBeforeScale: number;\n\tprivate viewTop: number;\n\tprivate viewRight: number;\n\tprivate viewBottom: number;\n\tprivate viewLeft: number;\n\tprivate _doneAfterUpdate: boolean = false;\n\tprivate elasticTop: number;\n\tprivate elasticRight: number;\n\tprivate elasticBottom: number;\n\tprivate elasticLeft: number;\n\tprivate scrollToListId: number;\n\tprivate adhering: boolean = false;\n\tprivate _adheringBarrier: boolean = false;\n\tprivate nearestListId: number;\n\tprivate _beganPos: number;\n\tprivate _scrollPos: number;\n\tprivate _curScrollIsTouch: boolean; //当前滑动是否为手动\n\tprivate _scrollToListId: number;\n\tprivate _scrollToEndTime: number;\n\tprivate _scrollToSo: any;\n\tprivate _lack: boolean;\n\tprivate _allItemSize: number;\n\tprivate _allItemSizeNoEdge: number;\n\tprivate _scrollItem: any; //当前控制 ScrollView 滚动的 Item\n\tprivate _thisNodeUt: UITransform;\n\t/*分层子节点数组*/\n\tprivate _contentList: Node[] = [];\n\n\tprivate _showAnimation: boolean = true;\n\n\t//滑动模式\n\t@property({})\n\tprivate _slideMode: SlideType = SlideType.NORMAL;\n\n\tget slideMode() {\n\t\treturn this._slideMode;\n\t}\n\n\t@property({\n\t\ttype: Enum(SlideType),\n\t\ttooltip: DEV && \"滑动模式\",\n\t})\n\tset slideMode(val: SlideType) {\n\t\tthis._slideMode = val;\n\t}\n\n\t//是否为虚拟列表（动态列表）\n\t@property({})\n\tprivate _virtual: boolean = true;\n\n\tget virtual() {\n\t\treturn this._virtual;\n\t}\n\n\t@property({\n\t\ttype: CCBoolean,\n\t\ttooltip: DEV && \"是否为虚拟列表（动态列表）\",\n\t})\n\tset virtual(val: boolean) {\n\t\tif (val !== false) this._virtual = val;\n\t\tif (!DEV && this._numItems != 0) {\n\t\t\tthis._onScrolling();\n\t\t}\n\t}\n\n\t//刷新频率\n\t@property({ type: CCInteger })\n\tprivate _updateRate: number = 0;\n\n\tget updateRate() {\n\t\treturn this._updateRate;\n\t}\n\n\t@property({\n\t\ttype: CCInteger,\n\t\trange: [0, 6, 1],\n\t\ttooltip: DEV && \"刷新频率（值越大刷新频率越低、性能越高）\",\n\t\tslide: true,\n\t})\n\tset updateRate(val: number) {\n\t\tif (val >= 0 && val <= 6) {\n\t\t\tthis._updateRate = val;\n\t\t}\n\t}\n\n\t//当前选择id\n\tprivate _selectedId: number = -1;\n\n\tget selectedId() {\n\t\treturn this._selectedId;\n\t}\n\n\tset selectedId(val: number) {\n\t\tlet t: any = this;\n\t\tlet item: any;\n\t\tswitch (t.selectedMode) {\n\t\t\tcase SelectedType.SINGLE: {\n\t\t\t\tif (!t.repeatEventSingle && val == t._selectedId) return;\n\t\t\t\titem = t.getItemByListId(val);\n\t\t\t\t// if (!item && val >= 0)\n\t\t\t\t//     return;\n\t\t\t\tlet listItem: ScrollListItem;\n\t\t\t\tif (t._selectedId >= 0) t._lastSelectedId = t._selectedId;\n\t\t\t\t//如果＜0则取消选择，把_lastSelectedId也置空吧，如果以后有特殊需求再改吧。\n\t\t\t\telse t._lastSelectedId = 0;\n\t\t\t\tt._selectedId = val;\n\t\t\t\tif (item) {\n\t\t\t\t\tlistItem = item.getComponent(ScrollListItem);\n\t\t\t\t\tlistItem.selected = true;\n\t\t\t\t}\n\t\t\t\tif (t._lastSelectedId >= 0 && (t._lastSelectedId != t._selectedId || (t._lastSelectedId === t._selectedId && this.canTouchCancel))) {\n\t\t\t\t\tlet lastItem: any = t.getItemByListId(t._lastSelectedId);\n\t\t\t\t\tif (lastItem) {\n\t\t\t\t\t\tlastItem.getComponent(ScrollListItem).selected = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (t._lastSelectedId === t._selectedId && this.canTouchCancel) {\n\t\t\t\t\t\tt._selectedId = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (t.selectedEvent) {\n\t\t\t\t\tEventHandler.emitEvents([t.selectedEvent], item, val % this._actualNumItems, t._lastSelectedId === 0 ? 0 : t._lastSelectedId % this._actualNumItems);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SelectedType.MULT: {\n\t\t\t\titem = t.getItemByListId(val);\n\t\t\t\tif (!item) return;\n\t\t\t\tlet listItem = item.getComponent(ScrollListItem);\n\t\t\t\tif (t._selectedId >= 0) t._lastSelectedId = t._selectedId;\n\t\t\t\tt._selectedId = val;\n\t\t\t\tlet bool: boolean = !listItem.selected;\n\t\t\t\tlistItem.selected = bool;\n\t\t\t\tlet sub: number = t.multSelected.indexOf(val);\n\t\t\t\tif (bool && sub < 0) {\n\t\t\t\t\tt.multSelected.push(val);\n\t\t\t\t} else if (!bool && sub >= 0) {\n\t\t\t\t\tt.multSelected.splice(sub, 1);\n\t\t\t\t}\n\t\t\t\tif (t.selectedEvent) {\n\t\t\t\t\tEventHandler.emitEvents([t.selectedEvent], item, val % this._actualNumItems, t._lastSelectedId === 0 ? 0 : t._lastSelectedId % this._actualNumItems, bool);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//列表数量\n\t@property({\n\t\tserializable: false,\n\t})\n\tprivate _numItems: number = 0;\n\n\tget numItems() {\n\t\treturn this._actualNumItems;\n\t}\n\n\tset numItems(val: number) {\n\t\tlet t = this;\n\t\tif (!t.checkInited(false)) return;\n\t\tif (val === 0 || val < 0) {\n\t\t\t// console.error(\"numItems set the wrong::\", val);\n\t\t\treturn;\n\t\t}\n\t\tt._actualNumItems = t._numItems = val;\n\t\tt._forceUpdate = true;\n\n\t\tif (t._virtual) {\n\t\t\tt._resizeContent();\n\t\t\tif (t.cyclic) {\n\t\t\t\tt._numItems = t._cyclicNum * t._numItems;\n\t\t\t}\n\t\t\tt._onScrolling();\n\t\t\tif (!t.frameByFrameRenderNum && t.slideMode == SlideType.PAGE) t.curPageNum = t.nearestListId;\n\t\t} else {\n\t\t\tif (t.cyclic) {\n\t\t\t\tt._resizeContent();\n\t\t\t\tt._numItems = t._cyclicNum * t._numItems;\n\t\t\t}\n\t\t\tlet layout: Layout = t.content.getComponent(Layout);\n\t\t\tif (layout) {\n\t\t\t\tlayout.enabled = true;\n\t\t\t}\n\t\t\tt._delRedundantItem();\n\n\t\t\tt.firstListId = 0;\n\t\t\tif (t.frameByFrameRenderNum > 0) {\n\t\t\t\t//先渲染几个出来\n\t\t\t\tlet len: number = t.frameByFrameRenderNum > t._numItems ? t._numItems : t.frameByFrameRenderNum;\n\t\t\t\tfor (let n: number = 0; n < len; n++) {\n\t\t\t\t\tt._createOrUpdateItem2(n);\n\t\t\t\t}\n\t\t\t\tif (t.frameByFrameRenderNum < t._numItems) {\n\t\t\t\t\tt._updateCounter = t.frameByFrameRenderNum;\n\t\t\t\t\tt._updateDone = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let n: number = 0; n < t._numItems; n++) {\n\t\t\t\t\tt._createOrUpdateItem2(n);\n\t\t\t\t}\n\t\t\t\tt.displayItemNum = t._numItems;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _scrollView: ScrollView;\n\n\tget scrollView() {\n\t\treturn this._scrollView;\n\t}\n\n\t//----------------------------------------------------------------------------\n\n\tonLoad() {\n\t\tthis._init();\n\t}\n\n\tonDestroy() {\n\t\tlet t: any = this;\n\t\tif (isValid(t._itemTmp)) t._itemTmp.destroy();\n\t\tif (isValid(t.tmpNode)) t.tmpNode.destroy();\n\n\t\tt._mainPool.clear();\n\t\tt._poolList.forEach((value) => {\n\t\t\tvalue.clear();\n\t\t});\n\t}\n\n\tonEnable() {\n\t\t// if (!EDITOR)\n\t\tthis._registerEvent();\n\t\tthis._init();\n\t\t// 处理重新显示后，有可能上一次的动画移除还未播放完毕，导致动画卡住的问题\n\t\tif (this._aniDelRuning) {\n\t\t\tthis._aniDelRuning = false;\n\t\t\tif (this._aniDelItem) {\n\t\t\t\tif (this._aniDelBeforePos) {\n\t\t\t\t\tthis._aniDelItem.position = this._aniDelBeforePos;\n\t\t\t\t\tdelete this._aniDelBeforePos;\n\t\t\t\t}\n\t\t\t\tif (this._aniDelBeforeScale) {\n\t\t\t\t\tthis._aniDelItem.scale = this._aniDelBeforeScale;\n\t\t\t\t\tdelete this._aniDelBeforeScale;\n\t\t\t\t}\n\t\t\t\tdelete this._aniDelItem;\n\t\t\t}\n\t\t\tif (this._aniDelCB) {\n\t\t\t\tthis._aniDelCB();\n\t\t\t\tdelete this._aniDelCB;\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\t// if (!EDITOR)\n\t\tthis._unregisterEvent();\n\t}\n\n\t//注册事件\n\t_registerEvent() {\n\t\tlet t: any = this;\n\t\tt.node.on(Node.EventType.TOUCH_START, t._onTouchStart, t, true);\n\t\tt.node.on(\"touch-up\", t._onTouchUp, t);\n\t\tt.node.on(Node.EventType.TOUCH_CANCEL, t._onTouchCancelled, t, true);\n\t\tt.node.on(\"scroll-began\", t._onScrollBegan, t, true);\n\t\tt.node.on(\"scroll-ended\", t._onScrollEnded, t, true);\n\t\tt.node.on(\"scrolling\", t._onScrolling, t, true);\n\t\tt.node.on(Node.EventType.SIZE_CHANGED, t._onSizeChanged, t);\n\t}\n\n\t//卸载事件\n\t_unregisterEvent() {\n\t\tlet t: any = this;\n\t\tt.node.off(Node.EventType.TOUCH_START, t._onTouchStart, t, true);\n\t\tt.node.off(\"touch-up\", t._onTouchUp, t);\n\t\tt.node.off(Node.EventType.TOUCH_CANCEL, t._onTouchCancelled, t, true);\n\t\tt.node.off(\"scroll-began\", t._onScrollBegan, t, true);\n\t\tt.node.off(\"scroll-ended\", t._onScrollEnded, t, true);\n\t\tt.node.off(\"scrolling\", t._onScrolling, t, true);\n\t\tt.node.off(Node.EventType.SIZE_CHANGED, t._onSizeChanged, t);\n\t}\n\n\t//初始化各种..\n\t_init() {\n\t\tlet t: any = this;\n\t\tif (t._inited) return;\n\n\t\tt._thisNodeUt = t.node.getComponent(UITransform);\n\t\tt._scrollView = t.node.getComponent(ScrollView);\n\n\t\tt.content = t._scrollView.content;\n\t\tt._contentUt = t.content.getComponent(UITransform);\n\t\tif (!t.content) {\n\t\t\tconsole.error(t.node.name + \"'s ScrollView unset content!\");\n\t\t\treturn;\n\t\t}\n\n\t\tt._layout = t.content.getComponent(Layout);\n\n\t\tt._align = t._layout.type; //排列模式\n\t\tt._resizeMode = t._layout.resizeMode; //自适应模式\n\t\tt._startAxis = t._layout.startAxis;\n\n\t\tt._topGap = t._layout.paddingTop; //顶边距\n\t\tt._rightGap = t._layout.paddingRight; //右边距\n\t\tt._bottomGap = t._layout.paddingBottom; //底边距\n\t\tt._leftGap = t._layout.paddingLeft; //左边距\n\n\t\tt._columnGap = t._layout.spacingX; //列距\n\t\tt._lineGap = t._layout.spacingY; //行距\n\n\t\tt._colLineNum; //列数或行数（非GRID模式则=1，表示单列或单行）;\n\n\t\tt._verticalDir = t._layout.verticalDirection; //垂直排列子节点的方向\n\t\tt._horizontalDir = t._layout.horizontalDirection; //水平排列子节点的方向\n\n\t\tt.setTemplateItem(instantiate(t.templateType == TemplateType.PREFAB ? t.tmpPrefab : t.tmpNode));\n\n\t\t// 特定的滑动模式处理\n\t\tif (t._slideMode == SlideType.ADHERING || t._slideMode == SlideType.PAGE) {\n\t\t\tt._scrollView.inertia = false;\n\t\t\tt._scrollView._onMouseWheel = function () {\n\t\t\t\treturn;\n\t\t\t};\n\t\t}\n\t\tif (!t.virtual)\n\t\t\t// lackCenter 仅支持 Virtual 模式\n\t\t\tt.lackCenter = false;\n\n\t\tt._lastDisplayData = []; //最后一次刷新的数据\n\t\tt.displayData = []; //当前数据\n\n\t\tt._forceUpdate = false; //是否强制更新\n\t\tt._updateCounter = 0; //当前分帧渲染帧数\n\t\tt._updateDone = true; //分帧渲染是否完成\n\n\t\tt.curPageNum = 0; //当前页数\n\n\t\tif (t.cyclic || 0) {\n\t\t\tt._scrollView._processAutoScrolling = this._processAutoScrolling.bind(t);\n\t\t\tt._scrollView._startBounceBackIfNeeded = function () {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tswitch (t._align) {\n\t\t\tcase Layout.Type.HORIZONTAL: {\n\t\t\t\tswitch (t._horizontalDir) {\n\t\t\t\t\tcase Layout.HorizontalDirection.LEFT_TO_RIGHT:\n\t\t\t\t\t\tt._alignCalcType = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Layout.HorizontalDirection.RIGHT_TO_LEFT:\n\t\t\t\t\t\tt._alignCalcType = 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Layout.Type.VERTICAL: {\n\t\t\t\tswitch (t._verticalDir) {\n\t\t\t\t\tcase Layout.VerticalDirection.TOP_TO_BOTTOM:\n\t\t\t\t\t\tt._alignCalcType = 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Layout.VerticalDirection.BOTTOM_TO_TOP:\n\t\t\t\t\t\tt._alignCalcType = 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Layout.Type.GRID: {\n\t\t\t\tswitch (t._startAxis) {\n\t\t\t\t\tcase Layout.AxisDirection.HORIZONTAL:\n\t\t\t\t\t\tswitch (t._verticalDir) {\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.TOP_TO_BOTTOM:\n\t\t\t\t\t\t\t\tt._alignCalcType = 3;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.BOTTOM_TO_TOP:\n\t\t\t\t\t\t\t\tt._alignCalcType = 4;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Layout.AxisDirection.VERTICAL:\n\t\t\t\t\t\tswitch (t._horizontalDir) {\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.LEFT_TO_RIGHT:\n\t\t\t\t\t\t\t\tt._alignCalcType = 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.RIGHT_TO_LEFT:\n\t\t\t\t\t\t\t\tt._alignCalcType = 2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// 清空 content\n\t\t// t.content.children.forEach((child: Node) => {\n\t\t//     child.removeFromParent();\n\t\t//     if (child != t.tmpNode && child.isValid)\n\t\t//         child.destroy();\n\t\t// });\n\t\tt.content.removeAllChildren();\n\t\tt._inited = true;\n\t\t//初始化 分层\n\t\tt._mainPool = new NodePool();\n\t\tconst tmpNode = t.templateType === TemplateType.PREFAB ? instantiate(t.tmpPrefab) : t.tmpNode;\n\n\t\tif (!EDITOR && isValid(tmpNode)) {\n\t\t\tlet listItem = tmpNode.getComponent(ScrollListItem);\n\t\t\tthis.contentLayerType = listItem.contentLayerType;\n\t\t\tif (this.contentLayerType === LayerType.SLICE) {\n\t\t\t\tfor (let i = 0; i < listItem.layerNodeList.length; i++) {\n\t\t\t\t\tlet childContent = new Node();\n\t\t\t\t\tchildContent.layer = Layers.Enum.UI_2D;\n\t\t\t\t\tconst contentTF = this.content.getComponent(UITransform);\n\t\t\t\t\tconst childtf = childContent.addComponent(UITransform);\n\t\t\t\t\tchildtf.anchorX = contentTF.anchorX;\n\t\t\t\t\tchildtf.anchorY = contentTF.anchorY;\n\t\t\t\t\tchildContent.position = this.content.position;\n\t\t\t\t\tchildContent.parent = this.content.parent;\n\t\t\t\t\tt._poolList.push(new NodePool()); //这是个池子..\n\t\t\t\t\tt._contentList.push(childContent); //分层节点数组\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 为了实现循环列表，必须覆写cc.ScrollView的某些函数\n\t * @param {Number} dt\n\t */\n\t_processAutoScrolling(dt: number) {\n\t\t// ------------- scroll-view 里定义的一些常量 -------------\n\t\tconst OUT_OF_BOUNDARY_BREAKING_FACTOR = 0.05;\n\t\tconst EPSILON = 1e-4;\n\t\tconst ZERO = new Vec3();\n\t\tconst quintEaseOut = (time: number) => {\n\t\t\ttime -= 1;\n\t\t\treturn time * time * time * time * time + 1;\n\t\t};\n\t\t// ------------- scroll-view 里定义的一些常量 -------------\n\n\t\tlet sv: ScrollView = this._scrollView;\n\n\t\tconst isAutoScrollBrake = sv[\"_isNecessaryAutoScrollBrake\"]();\n\t\tconst brakingFactor = isAutoScrollBrake ? OUT_OF_BOUNDARY_BREAKING_FACTOR : 1;\n\t\tsv[\"_autoScrollAccumulatedTime\"] += dt * (1 / brakingFactor);\n\n\t\tlet percentage = Math.min(1, sv[\"_autoScrollAccumulatedTime\"] / sv[\"_autoScrollTotalTime\"]);\n\t\tif (sv[\"_autoScrollAttenuate\"]) {\n\t\t\tpercentage = quintEaseOut(percentage);\n\t\t}\n\n\t\tconst clonedAutoScrollTargetDelta = sv[\"_autoScrollTargetDelta\"].clone();\n\t\tclonedAutoScrollTargetDelta.multiplyScalar(percentage);\n\t\tconst clonedAutoScrollStartPosition = sv[\"_autoScrollStartPosition\"].clone();\n\t\tclonedAutoScrollStartPosition.add(clonedAutoScrollTargetDelta);\n\t\tlet reachedEnd = Math.abs(percentage - 1) <= EPSILON;\n\n\t\tconst fireEvent = Math.abs(percentage - 1) <= sv[\"getScrollEndedEventTiming\"]();\n\t\tif (fireEvent && !sv[\"_isScrollEndedWithThresholdEventFired\"]) {\n\t\t\tsv[\"_dispatchEvent\"](ScrollView.EventType.SCROLL_ENG_WITH_THRESHOLD);\n\t\t\tsv[\"_isScrollEndedWithThresholdEventFired\"] = true;\n\t\t}\n\n\t\tif (sv[\"elastic\"]) {\n\t\t\tconst brakeOffsetPosition = clonedAutoScrollStartPosition.clone();\n\t\t\tbrakeOffsetPosition.subtract(sv[\"_autoScrollBrakingStartPosition\"]);\n\t\t\tif (isAutoScrollBrake) {\n\t\t\t\tbrakeOffsetPosition.multiplyScalar(brakingFactor);\n\t\t\t}\n\t\t\tclonedAutoScrollStartPosition.set(sv[\"_autoScrollBrakingStartPosition\"]);\n\t\t\tclonedAutoScrollStartPosition.add(brakeOffsetPosition);\n\t\t} else {\n\t\t\tconst moveDelta = clonedAutoScrollStartPosition.clone();\n\t\t\tmoveDelta.subtract(sv[\"_getContentPosition\"]());\n\t\t\tconst outOfBoundary = sv[\"_getHowMuchOutOfBoundary\"](moveDelta);\n\t\t\tif (!outOfBoundary.equals(ZERO, EPSILON)) {\n\t\t\t\tclonedAutoScrollStartPosition.add(outOfBoundary);\n\t\t\t\treachedEnd = true;\n\t\t\t}\n\t\t}\n\n\t\tif (reachedEnd) {\n\t\t\tsv[\"_autoScrolling\"] = false;\n\t\t}\n\n\t\tconst deltaMove = new Vec3(clonedAutoScrollStartPosition);\n\t\tdeltaMove.subtract(sv[\"_getContentPosition\"]());\n\t\tsv[\"_clampDelta\"](deltaMove);\n\t\tsv[\"_moveContent\"](deltaMove, reachedEnd);\n\t\tsv[\"_dispatchEvent\"](ScrollView.EventType.SCROLLING);\n\n\t\tif (!sv[\"_autoScrolling\"]) {\n\t\t\tsv[\"_isBouncing\"] = false;\n\t\t\tsv[\"_scrolling\"] = false;\n\t\t\tsv[\"_dispatchEvent\"](ScrollView.EventType.SCROLL_ENDED);\n\t\t}\n\t}\n\n\t//设置模板Item\n\tsetTemplateItem(item: any) {\n\t\tif (!item) return;\n\t\tlet t: any = this;\n\t\tt._itemTmp = item;\n\t\tt._itemTmpUt = item.getComponent(UITransform);\n\n\t\tif (t._resizeMode == Layout.ResizeMode.CHILDREN) t._itemSize = t._layout.cellSize;\n\t\telse {\n\t\t\tlet itemUt: UITransform = item.getComponent(UITransform);\n\t\t\tt._itemSize = new Size(itemUt.width, itemUt.height);\n\t\t}\n\n\t\t//获取ListItem，如果没有就取消选择模式\n\t\tlet com: any = item.getComponent(ScrollListItem);\n\t\tlet remove = false;\n\t\tif (!com) remove = true;\n\t\t// if (com) {\n\t\t//     if (!com._btnCom && !item.getComponent(cc.Button)) {\n\t\t//         remove = true;\n\t\t//     }\n\t\t// }\n\t\tif (remove) {\n\t\t\tt.selectedMode = SelectedType.NONE;\n\t\t}\n\t\tcom = item.getComponent(Widget);\n\t\tif (com && com.enabled) {\n\t\t\tt._needUpdateWidget = true;\n\t\t}\n\t\tif (t.selectedMode == SelectedType.MULT) t.multSelected = [];\n\n\t\tswitch (t._align) {\n\t\t\tcase Layout.Type.HORIZONTAL:\n\t\t\t\tt._colLineNum = 1;\n\t\t\t\tt._sizeType = false;\n\t\t\t\tbreak;\n\t\t\tcase Layout.Type.VERTICAL:\n\t\t\t\tt._colLineNum = 1;\n\t\t\t\tt._sizeType = true;\n\t\t\t\tbreak;\n\t\t\tcase Layout.Type.GRID:\n\t\t\t\tswitch (t._startAxis) {\n\t\t\t\t\tcase Layout.AxisDirection.HORIZONTAL:\n\t\t\t\t\t\t//计算列数\n\t\t\t\t\t\tlet trimW: number = t._contentUt.width - t._leftGap - t._rightGap;\n\t\t\t\t\t\tt._colLineNum = Math.floor((trimW + t._columnGap) / (t._itemSize.width + t._columnGap));\n\t\t\t\t\t\tt._sizeType = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Layout.AxisDirection.VERTICAL:\n\t\t\t\t\t\t//计算行数\n\t\t\t\t\t\tlet trimH: number = t._contentUt.height - t._topGap - t._bottomGap;\n\t\t\t\t\t\tt._colLineNum = Math.floor((trimH + t._lineGap) / (t._itemSize.height + t._lineGap));\n\t\t\t\t\t\tt._sizeType = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * 检查是否初始化\n\t * @param {Boolean} printLog 是否打印错误信息\n\t * @returns\n\t */\n\tcheckInited(printLog: boolean = true) {\n\t\tif (!this._inited) {\n\t\t\tif (printLog) console.error(\"List initialization not completed!\");\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t//禁用 Layout 组件，自行计算 Content Size\n\t_resizeContent() {\n\t\tlet t: any = this;\n\t\tlet result: number;\n\n\t\tswitch (t._align) {\n\t\t\tcase Layout.Type.HORIZONTAL: {\n\t\t\t\tif (t._customSize) {\n\t\t\t\t\tlet fixed: any = t._getFixedSize(0);\n\t\t\t\t\tresult = t._leftGap + fixed.val + t._itemSize.width * (t._numItems - fixed.count) + t._columnGap * (t._numItems - 1) + t._rightGap;\n\t\t\t\t} else {\n\t\t\t\t\tresult = t._leftGap + t._itemSize.width * t._numItems + t._columnGap * (t._numItems - 1) + t._rightGap;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Layout.Type.VERTICAL: {\n\t\t\t\tif (t._customSize) {\n\t\t\t\t\tlet fixed: any = t._getFixedSize(0);\n\t\t\t\t\tresult = t._topGap + fixed.val + t._itemSize.height * (t._numItems - fixed.count) + t._lineGap * (t._numItems - 1) + t._bottomGap;\n\t\t\t\t} else {\n\t\t\t\t\tresult = t._topGap + t._itemSize.height * t._numItems + t._lineGap * (t._numItems - 1) + t._bottomGap;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Layout.Type.GRID: {\n\t\t\t\t//网格模式不支持居中\n\t\t\t\tif (t.lackCenter) t.lackCenter = false;\n\t\t\t\tswitch (t._startAxis) {\n\t\t\t\t\tcase Layout.AxisDirection.HORIZONTAL:\n\t\t\t\t\t\tlet lineNum: number = Math.ceil(t._numItems / t._colLineNum);\n\t\t\t\t\t\tresult = t._topGap + t._itemSize.height * lineNum + t._lineGap * (lineNum - 1) + t._bottomGap;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Layout.AxisDirection.VERTICAL:\n\t\t\t\t\t\tlet colNum: number = Math.ceil(t._numItems / t._colLineNum);\n\t\t\t\t\t\tresult = t._leftGap + t._itemSize.width * colNum + t._columnGap * (colNum - 1) + t._rightGap;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet layout: Layout = t.content.getComponent(Layout);\n\t\tif (layout) layout.enabled = false;\n\n\t\tt._allItemSize = result;\n\t\tt._allItemSizeNoEdge = t._allItemSize - (t._sizeType ? t._topGap + t._bottomGap : t._leftGap + t._rightGap);\n\n\t\tif (t.cyclic) {\n\t\t\tlet totalSize: number = t._sizeType ? t._thisNodeUt.height : t._thisNodeUt.width;\n\n\t\t\tt._cyclicPos1 = 0;\n\t\t\ttotalSize -= t._cyclicPos1;\n\t\t\tt._cyclicNum = Math.ceil(totalSize / t._allItemSizeNoEdge) + 1;\n\t\t\tlet spacing: number = t._sizeType ? t._lineGap : t._columnGap;\n\t\t\tt._cyclicPos2 = t._cyclicPos1 + t._allItemSizeNoEdge + spacing;\n\t\t\tt._cyclicAllItemSize = t._allItemSize + t._allItemSizeNoEdge * (t._cyclicNum - 1) + spacing * (t._cyclicNum - 1);\n\t\t\tt._cycilcAllItemSizeNoEdge = t._allItemSizeNoEdge * t._cyclicNum;\n\t\t\tt._cycilcAllItemSizeNoEdge += spacing * (t._cyclicNum - 1);\n\t\t\t// cc.log('_cyclicNum ->', t._cyclicNum, t._allItemSizeNoEdge, t._allItemSize, t._cyclicPos1, t._cyclicPos2);\n\t\t}\n\n\t\tt._lack = !t.cyclic && t._allItemSize < (t._sizeType ? t._thisNodeUt.height : t._thisNodeUt.width);\n\t\tlet slideOffset: number = (!t._lack || !t.lackCenter) && t.lackSlide ? 0 : 0.1;\n\n\t\tlet targetWH: number = t._lack ? (t._sizeType ? t._thisNodeUt.height : t._thisNodeUt.width) - slideOffset : t.cyclic ? t._cyclicAllItemSize : t._allItemSize;\n\t\tif (targetWH < 0) targetWH = 0;\n\n\t\tif (t._sizeType) {\n\t\t\tt._contentUt.height = targetWH;\n\t\t} else {\n\t\t\tt._contentUt.width = targetWH;\n\t\t}\n\n\t\t// cc.log('_resizeContent()  numItems =', t._numItems, '，content =', t.content);\n\t}\n\n\t//滚动进行时...\n\t_onScrolling(ev: Event = undefined) {\n\t\tif (this.contentLayerType === LayerType.SLICE) {\n\t\t\tthis._contentList.forEach((content) => {\n\t\t\t\tcontent.position = this.content.position;\n\t\t\t});\n\t\t}\n\t\tif (this.frameCount === undefined) this.frameCount = this._updateRate;\n\t\tif (!this._forceUpdate && ev && ev.type != \"scroll-ended\" && this.frameCount > 0) {\n\t\t\tthis.frameCount--;\n\t\t\treturn;\n\t\t} else this.frameCount = this._updateRate;\n\n\t\tif (this._aniDelRuning) return;\n\n\t\t//循环列表处理\n\t\tif (this.cyclic) {\n\t\t\tlet scrollPos: any = this.content.getPosition();\n\t\t\tscrollPos = this._sizeType ? scrollPos.y : scrollPos.x;\n\n\t\t\tlet addVal = this._allItemSizeNoEdge + (this._sizeType ? this._lineGap : this._columnGap);\n\t\t\tlet add: any = this._sizeType ? new Vec3(0, addVal, 0) : new Vec3(addVal, 0, 0);\n\n\t\t\tlet contentPos = this.content.getPosition();\n\n\t\t\tswitch (this._alignCalcType) {\n\t\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\t\tif (scrollPos > -this._cyclicPos1) {\n\t\t\t\t\t\tcontentPos.set(-this._cyclicPos2, contentPos.y, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].subtract(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (this._beganPos) {\n\t\t\t\t\t\t//     this._beganPos += add;\n\t\t\t\t\t\t// }\n\t\t\t\t\t} else if (scrollPos < -this._cyclicPos2) {\n\t\t\t\t\t\tcontentPos.set(-this._cyclicPos1, contentPos.y, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].add(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (this._beganPos) {\n\t\t\t\t\t\t//     this._beganPos -= add;\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\t\tif (scrollPos < this._cyclicPos1) {\n\t\t\t\t\t\tcontentPos.set(this._cyclicPos2, contentPos.y, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].add(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (scrollPos > this._cyclicPos2) {\n\t\t\t\t\t\tcontentPos.set(this._cyclicPos1, contentPos.y, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].subtract(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\t\tif (scrollPos < this._cyclicPos1) {\n\t\t\t\t\t\tcontentPos.set(contentPos.x, this._cyclicPos2, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].add(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (scrollPos > this._cyclicPos2) {\n\t\t\t\t\t\tcontentPos.set(contentPos.x, this._cyclicPos1, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].subtract(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\t\tif (scrollPos > -this._cyclicPos1) {\n\t\t\t\t\t\tcontentPos.set(contentPos.x, -this._cyclicPos2, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].subtract(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (scrollPos < -this._cyclicPos2) {\n\t\t\t\t\t\tcontentPos.set(contentPos.x, -this._cyclicPos1, contentPos.z);\n\t\t\t\t\t\tthis.content.setPosition(contentPos);\n\t\t\t\t\t\tif (this._scrollView.isAutoScrolling()) {\n\t\t\t\t\t\t\tthis._scrollView[\"_autoScrollStartPosition\"] = this._scrollView[\"_autoScrollStartPosition\"].add(add);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._calcViewPos();\n\n\t\tlet vTop: number, vRight: number, vBottom: number, vLeft: number;\n\t\tif (this._sizeType) {\n\t\t\tvTop = this.viewTop;\n\t\t\tvBottom = this.viewBottom;\n\t\t} else {\n\t\t\tvRight = this.viewRight;\n\t\t\tvLeft = this.viewLeft;\n\t\t}\n\n\t\tif (this._virtual) {\n\t\t\tthis.displayData = [];\n\t\t\tlet itemPos: any;\n\n\t\t\tlet curId: number = 0;\n\t\t\tlet endId: number = this._numItems - 1;\n\n\t\t\tif (this._customSize) {\n\t\t\t\tlet breakFor: boolean = false;\n\t\t\t\t//如果该item的位置在可视区域内，就推入displayData\n\t\t\t\tfor (; curId <= endId && !breakFor; curId++) {\n\t\t\t\t\titemPos = this._calcItemPos(curId);\n\t\t\t\t\tswitch (this._align) {\n\t\t\t\t\t\tcase Layout.Type.HORIZONTAL:\n\t\t\t\t\t\t\tif (itemPos.right >= vLeft && itemPos.left <= vRight) {\n\t\t\t\t\t\t\t\tthis.displayData.push(itemPos);\n\t\t\t\t\t\t\t} else if (curId != 0 && this.displayData.length > 0) {\n\t\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Layout.Type.VERTICAL:\n\t\t\t\t\t\t\tif (itemPos.bottom <= vTop && itemPos.top >= vBottom) {\n\t\t\t\t\t\t\t\tthis.displayData.push(itemPos);\n\t\t\t\t\t\t\t} else if (curId != 0 && this.displayData.length > 0) {\n\t\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Layout.Type.GRID:\n\t\t\t\t\t\t\tswitch (this._startAxis) {\n\t\t\t\t\t\t\t\tcase Layout.AxisDirection.HORIZONTAL:\n\t\t\t\t\t\t\t\t\tif (itemPos.bottom <= vTop && itemPos.top >= vBottom) {\n\t\t\t\t\t\t\t\t\t\tthis.displayData.push(itemPos);\n\t\t\t\t\t\t\t\t\t} else if (curId != 0 && this.displayData.length > 0) {\n\t\t\t\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase Layout.AxisDirection.VERTICAL:\n\t\t\t\t\t\t\t\t\tif (itemPos.right >= vLeft && itemPos.left <= vRight) {\n\t\t\t\t\t\t\t\t\t\tthis.displayData.push(itemPos);\n\t\t\t\t\t\t\t\t\t} else if (curId != 0 && this.displayData.length > 0) {\n\t\t\t\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet ww: number = this._itemSize.width + this._columnGap;\n\t\t\t\tlet hh: number = this._itemSize.height + this._lineGap;\n\t\t\t\tswitch (this._alignCalcType) {\n\t\t\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\t\t\tcurId = (vLeft - this._leftGap) / ww;\n\t\t\t\t\t\tendId = (vRight - this._leftGap) / ww;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\t\t\tcurId = (-vRight - this._rightGap) / ww;\n\t\t\t\t\t\tendId = (-vLeft - this._rightGap) / ww;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\t\t\tcurId = (-vTop - this._topGap) / hh;\n\t\t\t\t\t\tendId = (-vBottom - this._topGap) / hh;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\t\t\tcurId = (vBottom - this._bottomGap) / hh;\n\t\t\t\t\t\tendId = (vTop - this._bottomGap) / hh;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcurId = Math.floor(curId) * this._colLineNum;\n\t\t\t\tendId = Math.ceil(endId) * this._colLineNum;\n\t\t\t\tendId--;\n\t\t\t\tif (curId < 0 || curId == -0) curId = 0;\n\t\t\t\tif (endId >= this._numItems) endId = this._numItems - 1;\n\t\t\t\tfor (; curId <= endId; curId++) {\n\t\t\t\t\tthis.displayData.push(this._calcItemPos(curId));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._delRedundantItem();\n\t\t\tif (this.displayData.length <= 0 || !this._numItems) {\n\t\t\t\t//if none, delete all.\n\t\t\t\tthis._lastDisplayData = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.firstListId = this.displayData[0].id;\n\t\t\tthis.displayItemNum = this.displayData.length;\n\n\t\t\tlet len: number = this._lastDisplayData.length;\n\n\t\t\tlet haveDataChange: boolean = this.displayItemNum != len;\n\t\t\tif (haveDataChange) {\n\t\t\t\t// 如果是逐帧渲染，需要排序\n\t\t\t\tif (this.frameByFrameRenderNum > 0) {\n\t\t\t\t\tthis._lastDisplayData.sort((a, b) => {\n\t\t\t\t\t\treturn a - b;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// 因List的显示数据是有序的，所以只需要判断数组长度是否相等，以及头、尾两个元素是否相等即可。\n\t\t\t\thaveDataChange = this.firstListId != this._lastDisplayData[0] || this.displayData[this.displayItemNum - 1].id != this._lastDisplayData[len - 1];\n\t\t\t}\n\n\t\t\tif (this._forceUpdate || haveDataChange) {\n\t\t\t\t//如果是强制更新\n\t\t\t\tif (this.frameByFrameRenderNum > 0) {\n\t\t\t\t\t// if (this._updateDone) {\n\t\t\t\t\t// this._lastDisplayData = [];\n\t\t\t\t\t//逐帧渲染\n\t\t\t\t\tif (this._numItems > 0) {\n\t\t\t\t\t\tif (!this._updateDone) {\n\t\t\t\t\t\t\tthis._doneAfterUpdate = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._updateCounter = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._updateDone = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._updateCounter = 0;\n\t\t\t\t\t\tthis._updateDone = true;\n\t\t\t\t\t}\n\t\t\t\t\t// }\n\t\t\t\t} else {\n\t\t\t\t\t//直接渲染\n\t\t\t\t\tthis._lastDisplayData = [];\n\t\t\t\t\t// cc.log('List Display Data II::', this.displayData);\n\t\t\t\t\tfor (let c = 0; c < this.displayItemNum; c++) {\n\t\t\t\t\t\tthis._createOrUpdateItem(this.displayData[c], this._showAnimation);\n\t\t\t\t\t}\n\t\t\t\t\tthis._showAnimation = false;\n\t\t\t\t\tthis._forceUpdate = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._calcNearestItem();\n\t\t}\n\t}\n\n\t//计算可视范围\n\t_calcViewPos() {\n\t\tlet scrollPos: any = this.content.getPosition();\n\t\tswitch (this._alignCalcType) {\n\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\tthis.elasticLeft = scrollPos.x > 0 ? scrollPos.x : 0;\n\t\t\t\tthis.viewLeft = (scrollPos.x < 0 ? -scrollPos.x : 0) - this.elasticLeft;\n\n\t\t\t\tthis.viewRight = this.viewLeft + this._thisNodeUt.width;\n\t\t\t\tthis.elasticRight = this.viewRight > this._contentUt.width ? Math.abs(this.viewRight - this._contentUt.width) : 0;\n\t\t\t\tthis.viewRight += this.elasticRight;\n\t\t\t\t// cc.log(this.elasticLeft, this.elasticRight, this.viewLeft, this.viewRight);\n\t\t\t\tbreak;\n\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\tthis.elasticRight = scrollPos.x < 0 ? -scrollPos.x : 0;\n\t\t\t\tthis.viewRight = (scrollPos.x > 0 ? -scrollPos.x : 0) + this.elasticRight;\n\t\t\t\tthis.viewLeft = this.viewRight - this._thisNodeUt.width;\n\t\t\t\tthis.elasticLeft = this.viewLeft < -this._contentUt.width ? Math.abs(this.viewLeft + this._contentUt.width) : 0;\n\t\t\t\tthis.viewLeft -= this.elasticLeft;\n\t\t\t\t// cc.log(this.elasticLeft, this.elasticRight, this.viewLeft, this.viewRight);\n\t\t\t\tbreak;\n\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\tthis.elasticTop = scrollPos.y < 0 ? Math.abs(scrollPos.y) : 0;\n\t\t\t\tthis.viewTop = (scrollPos.y > 0 ? -scrollPos.y : 0) + this.elasticTop;\n\t\t\t\tthis.viewBottom = this.viewTop - this._thisNodeUt.height;\n\t\t\t\tthis.elasticBottom = this.viewBottom < -this._contentUt.height ? Math.abs(this.viewBottom + this._contentUt.height) : 0;\n\t\t\t\tthis.viewBottom += this.elasticBottom;\n\t\t\t\t// cc.log(this.elasticTop, this.elasticBottom, this.viewTop, this.viewBottom);\n\t\t\t\tbreak;\n\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\tthis.elasticBottom = scrollPos.y > 0 ? Math.abs(scrollPos.y) : 0;\n\t\t\t\tthis.viewBottom = (scrollPos.y < 0 ? -scrollPos.y : 0) - this.elasticBottom;\n\t\t\t\tthis.viewTop = this.viewBottom + this._thisNodeUt.height;\n\t\t\t\tthis.elasticTop = this.viewTop > this._contentUt.height ? Math.abs(this.viewTop - this._contentUt.height) : 0;\n\t\t\t\tthis.viewTop -= this.elasticTop;\n\t\t\t\t// cc.log(this.elasticTop, this.elasticBottom, this.viewTop, this.viewBottom);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//计算位置 根据id\n\t_calcItemPos(id: number) {\n\t\tlet width: number, height: number, top: number, bottom: number, left: number, right: number, itemX: number, itemY: number;\n\t\tswitch (this._align) {\n\t\t\tcase Layout.Type.HORIZONTAL:\n\t\t\t\tswitch (this._horizontalDir) {\n\t\t\t\t\tcase Layout.HorizontalDirection.LEFT_TO_RIGHT: {\n\t\t\t\t\t\tif (this._customSize) {\n\t\t\t\t\t\t\tlet fixed: any = this._getFixedSize(id);\n\t\t\t\t\t\t\tleft = this._leftGap + (this._itemSize.width + this._columnGap) * (id - fixed.count) + (fixed.val + this._columnGap * fixed.count);\n\t\t\t\t\t\t\tlet cs: number = this._customSize[id];\n\t\t\t\t\t\t\twidth = cs > 0 ? cs : this._itemSize.width;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tleft = this._leftGap + (this._itemSize.width + this._columnGap) * id;\n\t\t\t\t\t\t\twidth = this._itemSize.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.lackCenter) {\n\t\t\t\t\t\t\tleft -= this._leftGap;\n\t\t\t\t\t\t\tlet offset: number = this._contentUt.width / 2 - this._allItemSizeNoEdge / 2;\n\t\t\t\t\t\t\tleft += offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tright = left + width;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\t\tright: right,\n\t\t\t\t\t\t\tx: left + this._itemTmpUt.anchorX * width,\n\t\t\t\t\t\t\ty: this._itemTmp.y,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tcase Layout.HorizontalDirection.RIGHT_TO_LEFT: {\n\t\t\t\t\t\tif (this._customSize) {\n\t\t\t\t\t\t\tlet fixed: any = this._getFixedSize(id);\n\t\t\t\t\t\t\tright = -this._rightGap - (this._itemSize.width + this._columnGap) * (id - fixed.count) - (fixed.val + this._columnGap * fixed.count);\n\t\t\t\t\t\t\tlet cs: number = this._customSize[id];\n\t\t\t\t\t\t\twidth = cs > 0 ? cs : this._itemSize.width;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tright = -this._rightGap - (this._itemSize.width + this._columnGap) * id;\n\t\t\t\t\t\t\twidth = this._itemSize.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.lackCenter) {\n\t\t\t\t\t\t\tright += this._rightGap;\n\t\t\t\t\t\t\tlet offset: number = this._contentUt.width / 2 - this._allItemSizeNoEdge / 2;\n\t\t\t\t\t\t\tright -= offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tleft = right - width;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\tright: right,\n\t\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\t\tx: left + this._itemTmpUt.anchorX * width,\n\t\t\t\t\t\t\ty: this._itemTmp.y,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Layout.Type.VERTICAL: {\n\t\t\t\tswitch (this._verticalDir) {\n\t\t\t\t\tcase Layout.VerticalDirection.TOP_TO_BOTTOM: {\n\t\t\t\t\t\tif (this._customSize) {\n\t\t\t\t\t\t\tlet fixed: any = this._getFixedSize(id);\n\t\t\t\t\t\t\ttop = -this._topGap - (this._itemSize.height + this._lineGap) * (id - fixed.count) - (fixed.val + this._lineGap * fixed.count);\n\t\t\t\t\t\t\tlet cs: number = this._customSize[id];\n\t\t\t\t\t\t\theight = cs > 0 ? cs : this._itemSize.height;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttop = -this._topGap - (this._itemSize.height + this._lineGap) * id;\n\t\t\t\t\t\t\theight = this._itemSize.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.lackCenter) {\n\t\t\t\t\t\t\ttop += this._topGap;\n\t\t\t\t\t\t\tlet offset: number = this._contentUt.height / 2 - this._allItemSizeNoEdge / 2;\n\t\t\t\t\t\t\ttop -= offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom = top - height;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\ttop: top,\n\t\t\t\t\t\t\tbottom: bottom,\n\t\t\t\t\t\t\tx: this._itemTmp.x,\n\t\t\t\t\t\t\ty: bottom + this._itemTmpUt.anchorY * height,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tcase Layout.VerticalDirection.BOTTOM_TO_TOP: {\n\t\t\t\t\t\tif (this._customSize) {\n\t\t\t\t\t\t\tlet fixed: any = this._getFixedSize(id);\n\t\t\t\t\t\t\tbottom = this._bottomGap + (this._itemSize.height + this._lineGap) * (id - fixed.count) + (fixed.val + this._lineGap * fixed.count);\n\t\t\t\t\t\t\tlet cs: number = this._customSize[id];\n\t\t\t\t\t\t\theight = cs > 0 ? cs : this._itemSize.height;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbottom = this._bottomGap + (this._itemSize.height + this._lineGap) * id;\n\t\t\t\t\t\t\theight = this._itemSize.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.lackCenter) {\n\t\t\t\t\t\t\tbottom -= this._bottomGap;\n\t\t\t\t\t\t\tlet offset: number = this._contentUt.height / 2 - this._allItemSizeNoEdge / 2;\n\t\t\t\t\t\t\tbottom += offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttop = bottom + height;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\ttop: top,\n\t\t\t\t\t\t\tbottom: bottom,\n\t\t\t\t\t\t\tx: this._itemTmp.x,\n\t\t\t\t\t\t\ty: bottom + this._itemTmpUt.anchorY * height,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcase Layout.Type.GRID: {\n\t\t\t\tlet colLine: number = Math.floor(id / this._colLineNum);\n\t\t\t\tswitch (this._startAxis) {\n\t\t\t\t\tcase Layout.AxisDirection.HORIZONTAL: {\n\t\t\t\t\t\tswitch (this._verticalDir) {\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.TOP_TO_BOTTOM: {\n\t\t\t\t\t\t\t\ttop = -this._topGap - (this._itemSize.height + this._lineGap) * colLine;\n\t\t\t\t\t\t\t\tbottom = top - this._itemSize.height;\n\t\t\t\t\t\t\t\titemY = bottom + this._itemTmpUt.anchorY * this._itemSize.height;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.BOTTOM_TO_TOP: {\n\t\t\t\t\t\t\t\tbottom = this._bottomGap + (this._itemSize.height + this._lineGap) * colLine;\n\t\t\t\t\t\t\t\ttop = bottom + this._itemSize.height;\n\t\t\t\t\t\t\t\titemY = bottom + this._itemTmpUt.anchorY * this._itemSize.height;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\titemX = this._leftGap + (id % this._colLineNum) * (this._itemSize.width + this._columnGap);\n\t\t\t\t\t\tswitch (this._horizontalDir) {\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.LEFT_TO_RIGHT: {\n\t\t\t\t\t\t\t\titemX += this._itemTmpUt.anchorX * this._itemSize.width;\n\t\t\t\t\t\t\t\titemX -= this._contentUt.anchorX * this._contentUt.width;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.RIGHT_TO_LEFT: {\n\t\t\t\t\t\t\t\titemX += (1 - this._itemTmpUt.anchorX) * this._itemSize.width;\n\t\t\t\t\t\t\t\titemX -= (1 - this._contentUt.anchorX) * this._contentUt.width;\n\t\t\t\t\t\t\t\titemX *= -1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\ttop: top,\n\t\t\t\t\t\t\tbottom: bottom,\n\t\t\t\t\t\t\tx: itemX,\n\t\t\t\t\t\t\ty: itemY,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tcase Layout.AxisDirection.VERTICAL: {\n\t\t\t\t\t\tswitch (this._horizontalDir) {\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.LEFT_TO_RIGHT: {\n\t\t\t\t\t\t\t\tleft = this._leftGap + (this._itemSize.width + this._columnGap) * colLine;\n\t\t\t\t\t\t\t\tright = left + this._itemSize.width;\n\t\t\t\t\t\t\t\titemX = left + this._itemTmpUt.anchorX * this._itemSize.width;\n\t\t\t\t\t\t\t\titemX -= this._contentUt.anchorX * this._contentUt.width;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase Layout.HorizontalDirection.RIGHT_TO_LEFT: {\n\t\t\t\t\t\t\t\tright = -this._rightGap - (this._itemSize.width + this._columnGap) * colLine;\n\t\t\t\t\t\t\t\tleft = right - this._itemSize.width;\n\t\t\t\t\t\t\t\titemX = left + this._itemTmpUt.anchorX * this._itemSize.width;\n\t\t\t\t\t\t\t\titemX += (1 - this._contentUt.anchorX) * this._contentUt.width;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\titemY = -this._topGap - (id % this._colLineNum) * (this._itemSize.height + this._lineGap);\n\t\t\t\t\t\tswitch (this._verticalDir) {\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.TOP_TO_BOTTOM: {\n\t\t\t\t\t\t\t\titemY -= (1 - this._itemTmpUt.anchorY) * this._itemSize.height;\n\t\t\t\t\t\t\t\titemY += (1 - this._contentUt.anchorY) * this._contentUt.height;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase Layout.VerticalDirection.BOTTOM_TO_TOP: {\n\t\t\t\t\t\t\t\titemY -= this._itemTmpUt.anchorY * this._itemSize.height;\n\t\t\t\t\t\t\t\titemY += this._contentUt.anchorY * this._contentUt.height;\n\t\t\t\t\t\t\t\titemY *= -1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\t\tright: right,\n\t\t\t\t\t\t\tx: itemX,\n\t\t\t\t\t\t\ty: itemY,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//计算已存在的Item的位置\n\t_calcExistItemPos(id: number) {\n\t\tlet item: any = this.getItemByListId(id);\n\t\tif (!item) return 0;\n\t\tlet ut: UITransform = item.getComponent(UITransform);\n\t\tlet pos: Vec3 = item.getPosition();\n\t\tlet data: any = {\n\t\t\tid: id,\n\t\t\tx: pos.x,\n\t\t\ty: pos.y,\n\t\t};\n\t\tif (this._sizeType) {\n\t\t\tdata.top = pos.y + ut.height * (1 - ut.anchorY);\n\t\t\tdata.bottom = pos.y - ut.height * ut.anchorY;\n\t\t} else {\n\t\t\tdata.left = pos.x - ut.width * ut.anchorX;\n\t\t\tdata.right = pos.x + ut.width * (1 - ut.anchorX);\n\t\t}\n\t\treturn data;\n\t}\n\n\t//获取Item位置\n\tgetItemPos(id: number) {\n\t\tif (this._virtual) return this._calcItemPos(id);\n\t\telse {\n\t\t\tif (this.frameByFrameRenderNum) return this._calcItemPos(id);\n\t\t\telse return this._calcExistItemPos(id);\n\t\t}\n\t}\n\n\t//获取固定尺寸\n\t_getFixedSize(listId: number) {\n\t\tif (!this._customSize) return null;\n\t\tif (listId === 0) listId = this._numItems;\n\t\tlet fixed: number = 0;\n\t\tlet count: number = 0;\n\t\tfor (let id in this._customSize) {\n\t\t\tif (parseInt(id) < listId) {\n\t\t\t\tfixed += this._customSize[id];\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tval: fixed,\n\t\t\tcount: count,\n\t\t};\n\t}\n\n\t//滚动结束时..\n\t_onScrollBegan() {\n\t\tthis._beganPos = this._sizeType ? this.viewTop : this.viewLeft;\n\t\tif (this._slideMode === SlideType.PAGE && !this._beganPos) {\n\t\t\tthis._beganPos = 0;\n\t\t}\n\t}\n\n\t//滚动结束时..\n\t_onScrollEnded() {\n\t\tlet t: any = this;\n\t\tt._curScrollIsTouch = false;\n\t\tif (t.scrollToListId !== 0) {\n\t\t\tlet item: any = t.getItemByListId(t.scrollToListId);\n\t\t\tt.scrollToListId = 0;\n\t\t\tif (item) {\n\t\t\t\ttween(item).to(0.1, { scale: 1.06 }).to(0.1, { scale: 1 }).start();\n\t\t\t}\n\t\t}\n\t\tt._onScrolling();\n\n\t\tif (t._slideMode == SlideType.ADHERING && !t.adhering) {\n\t\t\t//cc.log(t.adhering, t._scrollView.isAutoScrolling(), t._scrollView.isScrolling());\n\t\t\tt.adhere();\n\t\t} else if (t._slideMode == SlideType.PAGE) {\n\t\t\tif (t._beganPos !== 0 && t._curScrollIsTouch) {\n\t\t\t\tthis._pageAdhere();\n\t\t\t} else {\n\t\t\t\tt.adhere();\n\t\t\t}\n\t\t}\n\t}\n\n\t// 触摸时\n\t_onTouchStart(ev, captureListeners) {\n\t\tif (this._scrollView[\"_hasNestedViewGroup\"](ev, captureListeners)) return;\n\t\tthis._curScrollIsTouch = true;\n\t\tlet isMe = ev.eventPhase === Event.AT_TARGET && ev.target === this.node;\n\t\tif (!isMe) {\n\t\t\tlet itemNode: any = ev.target;\n\t\t\twhile (itemNode._listId === 0 && itemNode.parent) itemNode = itemNode.parent;\n\t\t\tthis._scrollItem = itemNode._listId !== 0 ? itemNode : ev.target;\n\t\t}\n\t}\n\n\t//触摸抬起时..\n\t_onTouchUp() {\n\t\tlet t: any = this;\n\t\tt._scrollPos = 0;\n\t\tif (t._slideMode == SlideType.ADHERING) {\n\t\t\tif (this.adhering) this._adheringBarrier = true;\n\t\t\tt.adhere();\n\t\t} else if (t._slideMode == SlideType.PAGE) {\n\t\t\tif (t._beganPos !== 0) {\n\t\t\t\tthis._pageAdhere();\n\t\t\t} else {\n\t\t\t\tt.adhere();\n\t\t\t}\n\t\t}\n\t\tthis._scrollItem = null;\n\t}\n\n\t_onTouchCancelled(ev, captureListeners) {\n\t\tlet t = this;\n\t\tif (t._scrollView[\"_hasNestedViewGroup\"](ev, captureListeners) || ev.simulate) return;\n\n\t\tt._scrollPos = 0;\n\t\tif (t._slideMode == SlideType.ADHERING) {\n\t\t\tif (t.adhering) t._adheringBarrier = true;\n\t\t\tt.adhere();\n\t\t} else if (t._slideMode == SlideType.PAGE) {\n\t\t\tif (t._beganPos !== 0) {\n\t\t\t\tt._pageAdhere();\n\t\t\t} else {\n\t\t\t\tt.adhere();\n\t\t\t}\n\t\t}\n\t\tthis._scrollItem = null;\n\t}\n\n\t//当尺寸改变\n\t_onSizeChanged() {\n\t\tif (this.checkInited(false)) this._onScrolling();\n\t}\n\n\t//当Item自适应\n\t_onItemAdaptive(item: any) {\n\t\tlet ut: UITransform = item.getComponent(UITransform);\n\t\t// if (this.checkInited(false)) {\n\t\tif ((!this._sizeType && ut.width != this._itemSize.width) || (this._sizeType && ut.height != this._itemSize.height)) {\n\t\t\tif (!this._customSize) this._customSize = {};\n\t\t\tlet val = this._sizeType ? ut.height : ut.width;\n\t\t\tif (this._customSize[item._listId] != val) {\n\t\t\t\tthis._customSize[item._listId] = val;\n\t\t\t\tthis._resizeContent();\n\t\t\t\t// this.content.children.forEach((child: Node) => {\n\t\t\t\t//     this._updateItemPos(child);\n\t\t\t\t// });\n\t\t\t\tthis.updateAll();\n\t\t\t\t// 如果当前正在运行 scrollTo，肯定会不准确，在这里做修正\n\t\t\t\tif (this._scrollToListId !== 0) {\n\t\t\t\t\tthis._scrollPos = 0;\n\t\t\t\t\tthis.unschedule(this._scrollToSo);\n\t\t\t\t\tthis.scrollTo(this._scrollToListId, Math.max(0, this._scrollToEndTime - new Date().getTime() / 1000));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// }\n\t}\n\n\t//PAGE粘附\n\t_pageAdhere() {\n\t\tlet t = this;\n\t\tif (!t.cyclic && (t.elasticTop > 0 || t.elasticRight > 0 || t.elasticBottom > 0 || t.elasticLeft > 0)) return;\n\t\tlet curPos = t._sizeType ? t.viewTop : t.viewLeft;\n\t\tlet dis = (t._sizeType ? t._thisNodeUt.height : t._thisNodeUt.width) * t.pageDistance;\n\t\tlet canSkip = Math.abs(t._beganPos - curPos) > dis;\n\t\tif (canSkip) {\n\t\t\tlet timeInSecond = 0.5;\n\t\t\tswitch (t._alignCalcType) {\n\t\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\t\tif (t._beganPos > curPos) {\n\t\t\t\t\t\tt.prePage(timeInSecond);\n\t\t\t\t\t\t// cc.log('_pageAdhere   PPPPPPPPPPPPPPP');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt.nextPage(timeInSecond);\n\t\t\t\t\t\t// cc.log('_pageAdhere   NNNNNNNNNNNNNNN');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\t\tif (t._beganPos < curPos) {\n\t\t\t\t\t\tt.prePage(timeInSecond);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt.nextPage(timeInSecond);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (t.elasticTop <= 0 && t.elasticRight <= 0 && t.elasticBottom <= 0 && t.elasticLeft <= 0) {\n\t\t\tt.adhere();\n\t\t}\n\t\tt._beganPos = 0;\n\t}\n\n\t//粘附\n\tadhere() {\n\t\tlet t: any = this;\n\t\tif (!t.checkInited()) return;\n\t\tif (t.elasticTop > 0 || t.elasticRight > 0 || t.elasticBottom > 0 || t.elasticLeft > 0) return;\n\t\tt.adhering = true;\n\t\tt._calcNearestItem();\n\t\tlet offset: number = (t._sizeType ? t._topGap : t._leftGap) / (t._sizeType ? t._thisNodeUt.height : t._thisNodeUt.width);\n\t\tlet timeInSecond: number = 0.7;\n\t\tt.scrollTo(t.nearestListId, timeInSecond, offset);\n\t}\n\n\t//Update..\n\tupdate() {\n\t\tif (this.frameByFrameRenderNum <= 0 || this._updateDone) return;\n\t\t// cc.log(this.displayData.length, this._updateCounter, this.displayData[this._updateCounter]);\n\t\tif (this._virtual) {\n\t\t\tlet len: number = this._updateCounter + this.frameByFrameRenderNum > this.displayItemNum ? this.displayItemNum : this._updateCounter + this.frameByFrameRenderNum;\n\t\t\tfor (let n: number = this._updateCounter; n < len; n++) {\n\t\t\t\tlet data: any = this.displayData[n];\n\t\t\t\tif (data) {\n\t\t\t\t\tthis._createOrUpdateItem(data, this._showAnimation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._updateCounter >= this.displayItemNum - 1) {\n\t\t\t\t//最后一个\n\t\t\t\tif (this._doneAfterUpdate) {\n\t\t\t\t\tthis._updateCounter = 0;\n\t\t\t\t\tthis._updateDone = false;\n\t\t\t\t\t// if (!this._scrollView.isScrolling())\n\t\t\t\t\tthis._doneAfterUpdate = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis._updateDone = true;\n\t\t\t\t\tthis._delRedundantItem();\n\t\t\t\t\tthis._forceUpdate = false;\n\t\t\t\t\tthis._calcNearestItem();\n\t\t\t\t\tif (this.slideMode == SlideType.PAGE) this.curPageNum = this.nearestListId;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._updateCounter += this.frameByFrameRenderNum;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._updateCounter < this._numItems) {\n\t\t\t\tlet len: number = this._updateCounter + this.frameByFrameRenderNum > this._numItems ? this._numItems : this._updateCounter + this.frameByFrameRenderNum;\n\t\t\t\tfor (let n: number = this._updateCounter; n < len; n++) {\n\t\t\t\t\tthis._createOrUpdateItem2(n);\n\t\t\t\t}\n\t\t\t\tthis._updateCounter += this.frameByFrameRenderNum;\n\t\t\t} else {\n\t\t\t\tthis._updateDone = true;\n\t\t\t\tthis._calcNearestItem();\n\t\t\t\tif (this.slideMode == SlideType.PAGE) this.curPageNum = this.nearestListId;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 创建或更新Item（虚拟列表用）\n\t * @param {Object} data 数据\n\t * @param animate 是否派发播放初始化动画 事件\n\t */\n\t_createOrUpdateItem(data: any, animate: boolean) {\n\t\tlet item: any = this.getItemByListId(data.id),\n\t\t\telementList: Node[] = [];\n\t\tif (!item) {\n\t\t\t//如果不存在\n\t\t\tlet canGet: boolean = this._mainPool.size() > 0;\n\t\t\tif (canGet) {\n\t\t\t\titem = this._mainPool.get();\n\t\t\t\tthis._poolList.forEach((pool, index) => {\n\t\t\t\t\tlet element: any = pool.get();\n\t\t\t\t\telementList.push(element);\n\t\t\t\t});\n\t\t\t\tif (!isValid(item)) {\n\t\t\t\t\titem = instantiate(this._itemTmp);\n\t\t\t\t\tlet component = item.getComponent(ScrollListItem);\n\t\t\t\t\tcomponent.layerNodeList.forEach((node, index) => {\n\t\t\t\t\t\tnode.posV3 = node.position.clone();\n\t\t\t\t\t\telementList.push(node);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = instantiate(this._itemTmp);\n\t\t\t\tlet component = item.getComponent(ScrollListItem);\n\t\t\t\tcomponent.layerNodeList.forEach((node, index) => {\n\t\t\t\t\tnode.posV3 = node.position.clone();\n\t\t\t\t\telementList.push(node);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (item._listId !== data.id) {\n\t\t\t\titem._listId = data.id;\n\t\t\t\telementList.forEach((element: any, index) => {\n\t\t\t\t\telement._listId = data.id;\n\t\t\t\t});\n\t\t\t\tlet ut: UITransform = item.getComponent(UITransform);\n\t\t\t\tut.setContentSize(this._itemSize);\n\t\t\t}\n\t\t\tconst vec3Point: Vec3 = new Vec3(data.x, data.y, 0);\n\t\t\titem.setPosition(vec3Point);\n\t\t\telementList.forEach((element: any, index) => {\n\t\t\t\tconst pos = element.posV3.clone().add(vec3Point);\n\t\t\t\telement.setPosition(pos);\n\t\t\t});\n\t\t\tthis._resetItemSize(item);\n\t\t\tthis.content.addChild(item);\n\t\t\telementList.forEach((element, index) => {\n\t\t\t\telement.parent = this._contentList[index];\n\t\t\t});\n\t\t\tif (this._needUpdateWidget) {\n\t\t\t\tlet widget: Widget = item.getComponent(Widget);\n\t\t\t\tif (widget) widget.updateAlignment();\n\t\t\t}\n\t\t\titem.setSiblingIndex(this.content.children.length - 1);\n\n\t\t\tlet listItem: ScrollListItem = item.getComponent(ScrollListItem);\n\t\t\titem[\"listItem\"] = listItem;\n\t\t\tif (listItem) {\n\t\t\t\tlistItem.listId = data.id;\n\t\t\t\tlistItem.list = this;\n\t\t\t\tlistItem._registerEvent();\n\t\t\t}\n\t\t\tif (this.renderEvent) {\n\t\t\t\tEventHandler.emitEvents([this.renderEvent], item, data.id % this._actualNumItems);\n\t\t\t}\n\t\t} else if (this._forceUpdate && this.renderEvent) {\n\t\t\t//强制更新\n\t\t\titem.setPosition(new Vec3(data.x, data.y, 0));\n\t\t\tthis._resetItemSize(item);\n\t\t\t// cc.log('ADD::', data.id, item);\n\t\t\tif (this.renderEvent) {\n\t\t\t\tEventHandler.emitEvents([this.renderEvent], item, data.id % this._actualNumItems);\n\t\t\t}\n\t\t}\n\t\tthis._resetItemSize(item);\n\n\t\tthis._updateListItem(item[\"listItem\"]);\n\t\tif (this._lastDisplayData.indexOf(data.id) < 0) {\n\t\t\tthis._lastDisplayData.push(data.id);\n\t\t}\n\t\tif (animate && this.animationEvent) {\n\t\t\tEventHandler.emitEvents([this.animationEvent], item, data.id % this._actualNumItems);\n\t\t}\n\t}\n\n\t//创建或更新Item（非虚拟列表用）\n\t_createOrUpdateItem2(listId: number) {\n\t\tlet item: any = this.content.children[listId],\n\t\t\telementList = [];\n\t\tlet listItem: ScrollListItem;\n\t\tif (!item) {\n\t\t\t//如果不存在\n\t\t\titem = instantiate(this._itemTmp);\n\t\t\tlet component = item.getComponent(ScrollListItem);\n\t\t\tcomponent.layerNodeList.forEach((node, index) => {\n\t\t\t\tnode.posV3 = node.position.clone();\n\t\t\t\telementList.push(node);\n\t\t\t});\n\t\t\titem._listId = listId;\n\t\t\tthis.content.addChild(item);\n\t\t\telementList.forEach((element, index) => {\n\t\t\t\telement._listId = listId;\n\t\t\t\telement.parent = this._contentList[index];\n\t\t\t});\n\t\t\tlistItem = item.getComponent(ScrollListItem);\n\t\t\titem[\"listItem\"] = listItem;\n\t\t\tif (listItem) {\n\t\t\t\tlistItem.listId = listId;\n\t\t\t\tlistItem.list = this;\n\t\t\t\tlistItem._registerEvent();\n\t\t\t}\n\t\t\tif (this.renderEvent) {\n\t\t\t\tEventHandler.emitEvents([this.renderEvent], item, listId % this._actualNumItems);\n\t\t\t}\n\t\t} else if (this._forceUpdate && this.renderEvent) {\n\t\t\t//强制更新\n\t\t\titem._listId = listId;\n\t\t\telementList.forEach((element, index) => {\n\t\t\t\telement._listId = listId;\n\t\t\t\telement.parent = this._contentList[index];\n\t\t\t});\n\t\t\tif (listItem) listItem.listId = listId;\n\t\t\tif (this.renderEvent) {\n\t\t\t\tEventHandler.emitEvents([this.renderEvent], item, listId % this._actualNumItems);\n\t\t\t}\n\t\t}\n\t\tthis._updateListItem(listItem);\n\t\tif (this._lastDisplayData.indexOf(listId) < 0) {\n\t\t\tthis._lastDisplayData.push(listId);\n\t\t}\n\t}\n\n\t_updateListItem(listItem: ScrollListItem) {\n\t\tif (!listItem) return;\n\t\tif (this.selectedMode > SelectedType.NONE) {\n\t\t\tlet item: any = listItem.node;\n\t\t\tswitch (this.selectedMode) {\n\t\t\t\tcase SelectedType.SINGLE:\n\t\t\t\t\tlistItem.selected = this.selectedId == item._listId;\n\t\t\t\t\tbreak;\n\t\t\t\tcase SelectedType.MULT:\n\t\t\t\t\tlistItem.selected = this.multSelected.indexOf(item._listId) >= 0;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//仅虚拟列表用\n\t_resetItemSize(item: any) {\n\t\t// return;\n\t\tlet size: number;\n\t\tlet ut: UITransform = item.getComponent(UITransform);\n\t\tif (this._customSize && this._customSize[item._listId]) {\n\t\t\tsize = this._customSize[item._listId];\n\t\t} else {\n\t\t\tif (this._colLineNum > 1) ut.setContentSize(this._itemSize);\n\t\t\telse size = this._sizeType ? this._itemSize.height : this._itemSize.width;\n\t\t}\n\t\tif (size) {\n\t\t\tif (this._sizeType) ut.height = size;\n\t\t\telse ut.width = size;\n\t\t}\n\t}\n\n\t/**\n\t * 更新Item位置\n\t * @param {Number||Node} listIdOrItem\n\t */\n\t_updateItemPos(listIdOrItem: any) {\n\t\tlet item: any = isNaN(listIdOrItem) ? listIdOrItem : this.getItemByListId(listIdOrItem);\n\t\tlet pos: any = this.getItemPos(item._listId);\n\t\titem.setPosition(pos.x, pos.y);\n\t}\n\n\t/**\n\t * 设置多选\n\t * @param {Array} args 可以是单个listId，也可是个listId数组\n\t * @param {Boolean} bool 值，如果为null的话，则直接用args覆盖\n\t */\n\tsetMultSelected(args: any, bool: boolean) {\n\t\tlet t: any = this;\n\t\tif (!t.checkInited()) return;\n\t\tif (!Array.isArray(args)) {\n\t\t\targs = [args];\n\t\t}\n\t\tif (bool === false) {\n\t\t\tt.multSelected = args;\n\t\t} else {\n\t\t\tlet listId: number, sub: number;\n\t\t\tif (bool) {\n\t\t\t\tfor (let n: number = args.length - 1; n >= 0; n--) {\n\t\t\t\t\tlistId = args[n];\n\t\t\t\t\tsub = t.multSelected.indexOf(listId);\n\t\t\t\t\tif (sub < 0) {\n\t\t\t\t\t\tt.multSelected.push(listId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let n: number = args.length - 1; n >= 0; n--) {\n\t\t\t\t\tlistId = args[n];\n\t\t\t\t\tsub = t.multSelected.indexOf(listId);\n\t\t\t\t\tif (sub >= 0) {\n\t\t\t\t\t\tt.multSelected.splice(sub, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tt._forceUpdate = true;\n\t\tt._onScrolling();\n\t}\n\n\t/**\n\t * 获取多选数据\n\t * @returns\n\t */\n\tgetMultSelected() {\n\t\treturn this.multSelected;\n\t}\n\n\t/**\n\t * 多选是否有选择\n\t * @param {number} listId 索引\n\t * @returns\n\t */\n\thasMultSelected(listId: number) {\n\t\treturn this.multSelected && this.multSelected.indexOf(listId) >= 0;\n\t}\n\n\t/**\n\t * 更新指定的Item\n\t * @param {Array} args 单个listId，或者数组\n\t * @returns\n\t */\n\tupdateItem(args: any) {\n\t\tif (!this.checkInited()) return;\n\t\tif (!Array.isArray(args)) {\n\t\t\targs = [args];\n\t\t}\n\t\tfor (let n: number = 0, len: number = args.length; n < len; n++) {\n\t\t\tlet listId: number = args[n];\n\t\t\tlet item: any = this.getItemByListId(listId);\n\t\t\tif (item) EventHandler.emitEvents([this.renderEvent], item, listId % this._actualNumItems);\n\t\t}\n\t}\n\n\t/**\n\t * 更新全部\n\t */\n\tupdateAll() {\n\t\tif (!this.checkInited()) return;\n\t\tthis.numItems = this.numItems;\n\t}\n\n\t/**\n\t * 根据ListID获取Item\n\t * @param {Number} listId\n\t * @param content\n\t * @returns\n\t */\n\tgetItemByListId(listId: number, content?: Node) {\n\t\tcontent = content || this.content;\n\t\tif (content) {\n\t\t\tfor (let n: number = content.children.length - 1; n >= 0; n--) {\n\t\t\t\tlet item: any = content.children[n];\n\t\t\t\tif (item._listId === listId) return item;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 获取在显示区域外的Item\n\t * @returns\n\t */\n\t_getOutsideItem(content?: Node) {\n\t\tcontent = content || this.content;\n\t\tlet item: any;\n\t\tlet result: any[] = [];\n\t\tfor (let n: number = content.children.length - 1; n >= 0; n--) {\n\t\t\titem = content.children[n];\n\t\t\tif (!this.displayData.find((d) => d.id === item._listId)) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\t//删除显示区域以外的Item\n\t_delRedundantItem() {\n\t\tif (this._virtual) {\n\t\t\tlet arr: any[] = this._getOutsideItem();\n\t\t\tfor (let n: number = arr.length - 1; n >= 0; n--) {\n\t\t\t\tlet item: any = arr[n];\n\t\t\t\tif (this._scrollItem && item._listId === this._scrollItem._listId) continue;\n\t\t\t\titem.isCached = true;\n\t\t\t\tthis._mainPool.put(item);\n\t\t\t\tfor (let m: number = this._lastDisplayData.length - 1; m >= 0; m--) {\n\t\t\t\t\tif (this._lastDisplayData[m] === item._listId) {\n\t\t\t\t\t\tthis._lastDisplayData.splice(m, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._contentList.forEach((content, index) => {\n\t\t\t\tlet arr: any[] = this._getOutsideItem(content);\n\t\t\t\tfor (let n: number = arr.length - 1; n >= 0; n--) {\n\t\t\t\t\tlet item: any = arr[n];\n\t\t\t\t\tif (this._scrollItem && item._listId === this._scrollItem._listId) continue;\n\t\t\t\t\tthis._poolList[index].put(item);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\twhile (this.content.children.length > this._numItems) {\n\t\t\t\tthis._delSingleItem(this.content.children[this.content.children.length - 1]);\n\t\t\t}\n\t\t\tthis._contentList.forEach((content, index) => {\n\t\t\t\twhile (content.children.length > this._numItems) {\n\t\t\t\t\tthis._delSingleItem(content.children[content.children.length - 1]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t//删除单个Item\n\t_delSingleItem(item: any) {\n\t\t// cc.log('DEL::', item['_listId'], item);\n\t\titem.removeFromParent();\n\t\tif (item.destroy) item.destroy();\n\t\titem = null;\n\t}\n\n\t/**\n\t * 动效删除Item（此方法只适用于虚拟列表，即_virtual=true）\n\t * 一定要在回调函数里重新设置新的numItems进行刷新，毕竟本List是靠数据驱动的。\n\t */\n\taniDelItem(listId: number, callFunc: Function, aniType: number) {\n\t\tlet t: any = this;\n\n\t\tif (!t.checkInited() || t.cyclic || !t._virtual) return console.error(\"This function is not allowed to be called!\");\n\n\t\tif (!callFunc) return console.error(\"CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!\");\n\n\t\tif (t._aniDelRuning) return console.warn(\"Please wait for the current deletion to finish!\");\n\n\t\tlet item: any = t.getItemByListId(listId);\n\t\tlet listItem: ScrollListItem;\n\t\tif (!item) {\n\t\t\tcallFunc(listId);\n\t\t\treturn;\n\t\t} else {\n\t\t\tlistItem = item.getComponent(ScrollListItem);\n\t\t}\n\t\tt._aniDelRuning = true;\n\t\tt._aniDelCB = callFunc;\n\t\tt._aniDelItem = item;\n\t\tt._aniDelBeforePos = item.position;\n\t\tt._aniDelBeforeScale = item.scale;\n\t\tlet curLastId: number = t.displayData[t.displayData.length - 1].id;\n\t\tlet resetSelectedId: boolean = listItem.selected;\n\t\tlistItem.showAni(\n\t\t\taniType,\n\t\t\t() => {\n\t\t\t\t//判断有没有下一个，如果有的话，创建粗来\n\t\t\t\tlet newId: number;\n\t\t\t\tif (curLastId < t._numItems - 2) {\n\t\t\t\t\tnewId = curLastId + 1;\n\t\t\t\t}\n\t\t\t\tif (newId !== 0) {\n\t\t\t\t\tlet newData: any = t._calcItemPos(newId);\n\t\t\t\t\tt.displayData.push(newData);\n\t\t\t\t\tif (t._virtual) t._createOrUpdateItem(newData, t._showAnimation);\n\t\t\t\t\telse t._createOrUpdateItem2(newId);\n\t\t\t\t} else t._numItems--;\n\t\t\t\tif (t.selectedMode == SelectedType.SINGLE) {\n\t\t\t\t\tif (resetSelectedId) {\n\t\t\t\t\t\tt._selectedId = -1;\n\t\t\t\t\t} else if (t._selectedId - 1 >= 0) {\n\t\t\t\t\t\tt._selectedId--;\n\t\t\t\t\t}\n\t\t\t\t} else if (t.selectedMode == SelectedType.MULT && t.multSelected.length) {\n\t\t\t\t\tlet sub: number = t.multSelected.indexOf(listId);\n\t\t\t\t\tif (sub >= 0) {\n\t\t\t\t\t\tt.multSelected.splice(sub, 1);\n\t\t\t\t\t}\n\t\t\t\t\t//多选的数据，在其后的全部减一\n\t\t\t\t\tfor (let n: number = t.multSelected.length - 1; n >= 0; n--) {\n\t\t\t\t\t\tlet id: number = t.multSelected[n];\n\t\t\t\t\t\tif (id >= listId) t.multSelected[n]--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (t._customSize) {\n\t\t\t\t\tif (t._customSize[listId]) delete t._customSize[listId];\n\t\t\t\t\tlet newCustomSize: any = {};\n\t\t\t\t\tlet size: number;\n\t\t\t\t\tfor (let id in t._customSize) {\n\t\t\t\t\t\tsize = t._customSize[id];\n\t\t\t\t\t\tlet idNumber: number = parseInt(id);\n\t\t\t\t\t\tnewCustomSize[idNumber - (idNumber >= listId ? 1 : 0)] = size;\n\t\t\t\t\t}\n\t\t\t\t\tt._customSize = newCustomSize;\n\t\t\t\t}\n\t\t\t\t//后面的Item向前怼的动效\n\t\t\t\tlet sec: number = 0.2333;\n\t\t\t\tlet twe: Tween<Node>, haveCB: boolean;\n\t\t\t\tfor (let n: number = newId !== 0 ? newId : curLastId; n >= listId + 1; n--) {\n\t\t\t\t\titem = t.getItemByListId(n);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tlet posData: any = t._calcItemPos(n - 1);\n\t\t\t\t\t\ttwe = tween(item).to(sec, { position: new Vec3(posData.x, posData.y, 0) });\n\n\t\t\t\t\t\tif (n <= listId + 1) {\n\t\t\t\t\t\t\thaveCB = true;\n\t\t\t\t\t\t\ttwe.call(() => {\n\t\t\t\t\t\t\t\tt._aniDelRuning = false;\n\t\t\t\t\t\t\t\tcallFunc(listId);\n\t\t\t\t\t\t\t\tdelete t._aniDelCB;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttwe.start();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!haveCB) {\n\t\t\t\t\tt._aniDelRuning = false;\n\t\t\t\t\tcallFunc(listId);\n\t\t\t\t\tt._aniDelCB = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n\n\t/**\n\t * 滚动到..\n\t * @param {Number} listId 索引（如果<0，则滚到首个Item位置，如果>=_numItems，则滚到最末Item位置）\n\t * @param {Number} timeInSecond 时间\n\t * @param {Number} offset 索引目标位置偏移，0-1\n\t * @param {Boolean} overStress 滚动后是否强调该Item（这只是个实验功能）\n\t */\n\tscrollTo(listId: number, timeInSecond: number = 0.5, offset: number = 0, overStress: boolean = false) {\n\t\tlet t = this;\n\t\tif (!t.checkInited(false)) return;\n\t\t// t._scrollView.stopAutoScroll();\n\t\tif (timeInSecond === 0)\n\t\t\t//默认0.5\n\t\t\ttimeInSecond = 0.5;\n\t\telse if (timeInSecond < 0) timeInSecond = 0;\n\t\tif (listId < 0) listId = 0;\n\t\telse if (listId >= t._numItems) listId = t._numItems - 1;\n\t\t// 以防设置了numItems之后layout的尺寸还未更新\n\t\tif (!t._virtual && t._layout && t._layout.enabled) t._layout.updateLayout();\n\n\t\tlet pos = t.getItemPos(listId);\n\t\tif (!pos) {\n\t\t\treturn DEV && console.error(\"pos is null\", listId);\n\t\t}\n\t\tlet targetX: number, targetY: number;\n\n\t\tswitch (t._alignCalcType) {\n\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\ttargetX = pos.left;\n\t\t\t\tif (offset !== 0) targetX -= t._thisNodeUt.width * offset;\n\t\t\t\telse targetX -= t._leftGap;\n\t\t\t\tpos = new Vec3(targetX, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\ttargetX = pos.right - t._thisNodeUt.width;\n\t\t\t\tif (offset !== 0) targetX += t._thisNodeUt.width * offset;\n\t\t\t\telse targetX += t._rightGap;\n\t\t\t\tpos = new Vec3(targetX + t._contentUt.width, 0, 0);\n\t\t\t\tbreak;\n\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\ttargetY = pos.top;\n\t\t\t\tif (offset !== 0) targetY += t._thisNodeUt.height * offset;\n\t\t\t\telse targetY += t._topGap;\n\t\t\t\tpos = new Vec3(0, -targetY, 0);\n\t\t\t\tbreak;\n\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\ttargetY = pos.bottom + t._thisNodeUt.height;\n\t\t\t\tif (offset !== 0) targetY -= t._thisNodeUt.height * offset;\n\t\t\t\telse targetY -= t._bottomGap;\n\t\t\t\tpos = new Vec3(0, -targetY + t._contentUt.height, 0);\n\t\t\t\tbreak;\n\t\t}\n\t\tlet viewPos: any = t.content.getPosition();\n\t\tviewPos = Math.abs(t._sizeType ? viewPos.y : viewPos.x);\n\n\t\tlet comparePos = t._sizeType ? pos.y : pos.x;\n\t\tlet runScroll = Math.abs((t._scrollPos !== 0 ? t._scrollPos : viewPos) - comparePos) > 0.5;\n\t\t// cc.log(runScroll, t._scrollPos, viewPos, comparePos)\n\n\t\t// t._scrollView.stopAutoScroll();\n\t\tif (runScroll) {\n\t\t\tt._scrollView.scrollToOffset(pos, timeInSecond);\n\t\t\tt._scrollToListId = listId;\n\t\t\tt._scrollToEndTime = new Date().getTime() / 1000 + timeInSecond;\n\t\t\t// cc.log(listId, t.content.width, t.content.getPosition(), pos);\n\t\t\tt._scrollToSo = t.scheduleOnce(() => {\n\t\t\t\tif (!t._adheringBarrier) {\n\t\t\t\t\tt.adhering = t._adheringBarrier = false;\n\t\t\t\t}\n\t\t\t\tt._scrollPos = t._scrollToListId = t._scrollToEndTime = t._scrollToSo = 0;\n\t\t\t\t//cc.log('2222222222', t._adheringBarrier)\n\t\t\t\tif (overStress) {\n\t\t\t\t\t// t.scrollToListId = listId;\n\t\t\t\t\tlet item = t.getItemByListId(listId);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\ttween(item).to(0.1, { scale: 1.05 }).to(0.1, { scale: 1 }).start();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, timeInSecond + 0.1);\n\n\t\t\tif (timeInSecond <= 0) {\n\t\t\t\tt._onScrolling();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 计算当前滚动窗最近的Item\n\t */\n\t_calcNearestItem() {\n\t\tlet t: any = this;\n\t\tt.nearestListId = 0;\n\t\tlet data: any, center: number;\n\n\t\tif (t._virtual) t._calcViewPos();\n\n\t\tlet vTop: number, vRight: number, vBottom: number, vLeft: number;\n\t\tvTop = t.viewTop;\n\t\tvRight = t.viewRight;\n\t\tvBottom = t.viewBottom;\n\t\tvLeft = t.viewLeft;\n\n\t\tlet breakFor: boolean = false;\n\t\tfor (let n = 0; n < t.content.children.length && !breakFor; n += t._colLineNum) {\n\t\t\tdata = t._virtual ? t.displayData[n] : t._calcExistItemPos(n);\n\t\t\tif (data) {\n\t\t\t\tcenter = t._sizeType ? (data.top + data.bottom) / 2 : (center = (data.left + data.right) / 2);\n\t\t\t\tswitch (t._alignCalcType) {\n\t\t\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\t\t\tif (data.right >= vLeft) {\n\t\t\t\t\t\t\tt.nearestListId = data.id;\n\t\t\t\t\t\t\tif (vLeft > center) t.nearestListId += t._colLineNum;\n\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\t\t\tif (data.left <= vRight) {\n\t\t\t\t\t\t\tt.nearestListId = data.id;\n\t\t\t\t\t\t\tif (vRight < center) t.nearestListId += t._colLineNum;\n\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\t\t\tif (data.bottom <= vTop) {\n\t\t\t\t\t\t\tt.nearestListId = data.id;\n\t\t\t\t\t\t\tif (vTop < center) t.nearestListId += t._colLineNum;\n\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\t\t\tif (data.top >= vBottom) {\n\t\t\t\t\t\t\tt.nearestListId = data.id;\n\t\t\t\t\t\t\tif (vBottom > center) t.nearestListId += t._colLineNum;\n\t\t\t\t\t\t\tbreakFor = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//判断最后一个Item。。。（哎，这些判断真心恶心，判断了前面的还要判断最后一个。。。一开始呢，就只有一个布局（单列布局），那时候代码才三百行，后来就想着完善啊，艹..这坑真深，现在这行数都一千五了= =||）\n\t\tdata = t._virtual ? t.displayData[t.displayItemNum - 1] : t._calcExistItemPos(t._numItems - 1);\n\t\tif (data && data.id == t._numItems - 1) {\n\t\t\tcenter = t._sizeType ? (data.top + data.bottom) / 2 : (center = (data.left + data.right) / 2);\n\t\t\tswitch (t._alignCalcType) {\n\t\t\t\tcase 1: //单行HORIZONTAL（LEFT_TO_RIGHT）、网格VERTICAL（LEFT_TO_RIGHT）\n\t\t\t\t\tif (vRight > center) t.nearestListId = data.id;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2: //单行HORIZONTAL（RIGHT_TO_LEFT）、网格VERTICAL（RIGHT_TO_LEFT）\n\t\t\t\t\tif (vLeft < center) t.nearestListId = data.id;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3: //单列VERTICAL（TOP_TO_BOTTOM）、网格HORIZONTAL（TOP_TO_BOTTOM）\n\t\t\t\t\tif (vBottom < center) t.nearestListId = data.id;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4: //单列VERTICAL（BOTTOM_TO_TOP）、网格HORIZONTAL（BOTTOM_TO_TOP）\n\t\t\t\t\tif (vTop > center) t.nearestListId = data.id;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// cc.log('t.nearestListId =', t.nearestListId);\n\t}\n\n\t//上一页\n\tprePage(timeInSecond: number = 0.5) {\n\t\t// cc.log('👈');\n\t\tif (!this.checkInited()) return;\n\t\tthis.skipPage(this.curPageNum - 1, timeInSecond);\n\t}\n\n\t//下一页\n\tnextPage(timeInSecond: number = 0.5) {\n\t\t// cc.log('👉');\n\t\tif (!this.checkInited()) return;\n\t\tthis.skipPage(this.curPageNum + 1, timeInSecond);\n\t}\n\n\t//跳转到第几页\n\tskipPage(pageNum: number, timeInSecond: number) {\n\t\tlet t: any = this;\n\t\tif (!t.checkInited()) return;\n\t\tif (t._slideMode != SlideType.PAGE) return console.error(\"This function is not allowed to be called, Must SlideMode = PAGE!\");\n\t\tif (pageNum < 0 || pageNum >= t._numItems) return;\n\t\tif (t.curPageNum == pageNum) return;\n\t\t// cc.log(pageNum);\n\t\tt.curPageNum = pageNum;\n\t\tif (t.pageChangeEvent) {\n\t\t\tEventHandler.emitEvents([t.pageChangeEvent], pageNum);\n\t\t}\n\t\tt.scrollTo(pageNum, timeInSecond);\n\t}\n\n\t//计算 CustomSize（这个函数还是保留吧，某些罕见的情况的确还是需要手动计算customSize的）\n\tcalcCustomSize(numItems: number) {\n\t\tlet t: any = this;\n\t\tif (!t.checkInited()) return;\n\t\tif (!t._itemTmp) return console.error(\"Unset template item!\");\n\t\tif (!t.renderEvent) return console.error(\"Unset Render-Event!\");\n\t\tt._customSize = {};\n\t\tlet temp: any = instantiate(t._itemTmp);\n\t\tlet ut: UITransform = temp.getComponent(UITransform);\n\t\tt.content.addChild(temp);\n\t\tfor (let n: number = 0; n < numItems; n++) {\n\t\t\tEventHandler.emitEvents([t.renderEvent], temp, n);\n\t\t\tif (ut.height != t._itemSize.height || ut.width != t._itemSize.width) {\n\t\t\t\tt._customSize[n] = t._sizeType ? ut.height : ut.width;\n\t\t\t}\n\t\t}\n\t\tif (!Object.keys(t._customSize).length) t._customSize = null;\n\t\ttemp.removeFromParent();\n\t\tif (temp.destroy) temp.destroy();\n\t\treturn t._customSize;\n\t}\n}\n"]}